"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/detect-keywords/route";
exports.ids = ["app/api/detect-keywords/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "node:fs":
/*!**************************!*\
  !*** external "node:fs" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("node:fs");

/***/ }),

/***/ "node:stream":
/*!******************************!*\
  !*** external "node:stream" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:stream");

/***/ }),

/***/ "node:stream/web":
/*!**********************************!*\
  !*** external "node:stream/web" ***!
  \**********************************/
/***/ ((module) => {

module.exports = require("node:stream/web");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "worker_threads":
/*!*********************************!*\
  !*** external "worker_threads" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("worker_threads");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fdetect-keywords%2Froute&page=%2Fapi%2Fdetect-keywords%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fdetect-keywords%2Froute.ts&appDir=%2Fhome%2Frishi%2FDesktop%2Fhackathon%2FHelloWorld2025%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Frishi%2FDesktop%2Fhackathon%2FHelloWorld2025&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fdetect-keywords%2Froute&page=%2Fapi%2Fdetect-keywords%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fdetect-keywords%2Froute.ts&appDir=%2Fhome%2Frishi%2FDesktop%2Fhackathon%2FHelloWorld2025%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Frishi%2FDesktop%2Fhackathon%2FHelloWorld2025&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _home_rishi_Desktop_hackathon_HelloWorld2025_app_api_detect_keywords_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/detect-keywords/route.ts */ \"(rsc)/./app/api/detect-keywords/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/detect-keywords/route\",\n        pathname: \"/api/detect-keywords\",\n        filename: \"route\",\n        bundlePath: \"app/api/detect-keywords/route\"\n    },\n    resolvedPagePath: \"/home/rishi/Desktop/hackathon/HelloWorld2025/app/api/detect-keywords/route.ts\",\n    nextConfigOutput,\n    userland: _home_rishi_Desktop_hackathon_HelloWorld2025_app_api_detect_keywords_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/detect-keywords/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZkZXRlY3Qta2V5d29yZHMlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmRldGVjdC1rZXl3b3JkcyUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmRldGVjdC1rZXl3b3JkcyUyRnJvdXRlLnRzJmFwcERpcj0lMkZob21lJTJGcmlzaGklMkZEZXNrdG9wJTJGaGFja2F0aG9uJTJGSGVsbG9Xb3JsZDIwMjUlMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRmhvbWUlMkZyaXNoaSUyRkRlc2t0b3AlMkZoYWNrYXRob24lMkZIZWxsb1dvcmxkMjAyNSZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUM2QjtBQUMxRztBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLHVHQUF1RztBQUMvRztBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQzZKOztBQUU3SiIsInNvdXJjZXMiOlsid2VicGFjazovL3BkZi1rZXl3b3JkLWFuYWx5emVyLz83ODIwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi9ob21lL3Jpc2hpL0Rlc2t0b3AvaGFja2F0aG9uL0hlbGxvV29ybGQyMDI1L2FwcC9hcGkvZGV0ZWN0LWtleXdvcmRzL3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9kZXRlY3Qta2V5d29yZHMvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9kZXRlY3Qta2V5d29yZHNcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL2RldGVjdC1rZXl3b3Jkcy9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9ob21lL3Jpc2hpL0Rlc2t0b3AvaGFja2F0aG9uL0hlbGxvV29ybGQyMDI1L2FwcC9hcGkvZGV0ZWN0LWtleXdvcmRzL3JvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIGhlYWRlckhvb2tzLCBzdGF0aWNHZW5lcmF0aW9uQmFpbG91dCB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL2RldGVjdC1rZXl3b3Jkcy9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBoZWFkZXJIb29rcywgc3RhdGljR2VuZXJhdGlvbkJhaWxvdXQsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fdetect-keywords%2Froute&page=%2Fapi%2Fdetect-keywords%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fdetect-keywords%2Froute.ts&appDir=%2Fhome%2Frishi%2FDesktop%2Fhackathon%2FHelloWorld2025%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Frishi%2FDesktop%2Fhackathon%2FHelloWorld2025&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/detect-keywords/route.ts":
/*!******************************************!*\
  !*** ./app/api/detect-keywords/route.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! openai */ \"(rsc)/./node_modules/openai/index.mjs\");\n\n\nconst openai = new openai__WEBPACK_IMPORTED_MODULE_1__[\"default\"]({\n    apiKey: process.env.OPENAI_API_KEY\n});\nasync function POST(request) {\n    try {\n        const { text } = await request.json();\n        if (!text) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Text is required\"\n            }, {\n                status: 400\n            });\n        }\n        // Use semantic fingerprint-based keyword detection\n        const keywords = await semanticFingerprintKeywordDetection(text);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            keywords\n        });\n    } catch (error) {\n        console.error(\"Error detecting keywords:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: \"Failed to detect keywords\"\n        }, {\n            status: 500\n        });\n    }\n}\nasync function semanticFingerprintKeywordDetection(text) {\n    const keywords = [];\n    const foundTerms = new Set();\n    // Clean the text to remove non-content sections\n    const cleanText = cleanTextForKeywordDetection(text);\n    // Semantic fingerprint analysis\n    const semanticFingerprint = analyzeSemanticFingerprint(cleanText);\n    // Extract keywords using multiple semantic strategies\n    const strategies = [\n        ()=>extractTechnicalTerms(cleanText, semanticFingerprint),\n        ()=>extractFrequentIntegralTerms(cleanText, semanticFingerprint),\n        ()=>extractContextualKeywords(cleanText, semanticFingerprint),\n        ()=>extractDomainSpecificTerms(cleanText, semanticFingerprint),\n        ()=>extractSemanticClusters(cleanText, semanticFingerprint),\n        ()=>extractMultiWordPhrases(cleanText, semanticFingerprint)\n    ];\n    strategies.forEach((strategy)=>{\n        const extractedKeywords = strategy();\n        extractedKeywords.forEach((keyword)=>{\n            if (!foundTerms.has(keyword.word.toLowerCase())) {\n                foundTerms.add(keyword.word.toLowerCase());\n                keywords.push(keyword);\n            }\n        });\n    });\n    // Remove duplicates and sort by semantic importance score\n    const uniqueKeywords = keywords.filter((keyword, index, self)=>index === self.findIndex((k)=>k.word.toLowerCase() === keyword.word.toLowerCase()));\n    // Sort by semantic importance score (higher is better)\n    uniqueKeywords.sort((a, b)=>b.score - a.score);\n    // Return top 20 keywords with definitions and context\n    const keywordsWithDefinitions = await Promise.all(uniqueKeywords.slice(0, 20).map(async (k)=>{\n        const definitionResult = await generateDefinition(k.word, cleanText, semanticFingerprint);\n        return {\n            word: k.word,\n            definition: definitionResult.definition,\n            context: k.context,\n            isGPT: definitionResult.isGPT\n        };\n    }));\n    return keywordsWithDefinitions;\n}\nfunction analyzeSemanticFingerprint(text) {\n    const fingerprint = {\n        // Document structure analysis\n        sections: extractDocumentSections(text),\n        // Word frequency analysis\n        wordFrequencies: calculateWordFrequencies(text),\n        // Technical term density\n        technicalDensity: calculateTechnicalDensity(text),\n        // Semantic clusters\n        semanticClusters: identifySemanticClusters(text),\n        // Contextual importance\n        contextualImportance: calculateContextualImportance(text),\n        // Domain indicators\n        domainIndicators: identifyDomainIndicators(text)\n    };\n    return fingerprint;\n}\nfunction extractDocumentSections(text) {\n    const sections = {\n        abstract: extractSection(text, /abstract\\s*:?/i),\n        introduction: extractSection(text, /introduction\\s*:?/i),\n        methodology: extractSection(text, /method(?:ology|s)?\\s*:?/i),\n        results: extractSection(text, /results?\\s*:?/i),\n        discussion: extractSection(text, /discussion\\s*:?/i),\n        conclusion: extractSection(text, /conclusion\\s*:?/i)\n    };\n    return sections;\n}\nfunction extractSection(text, pattern) {\n    const match = text.match(new RegExp(pattern.source + \"([\\\\s\\\\S]*?)(?=\\\\n\\\\n[A-Z]|\\\\n[A-Z][a-z]+\\\\s*:?|$)\", \"i\"));\n    return match ? match[1].trim() : \"\";\n}\nfunction calculateWordFrequencies(text) {\n    const words = text.toLowerCase().match(/\\b[a-zA-Z]{3,}\\b/g) || [];\n    const frequencies = {};\n    words.forEach((word)=>{\n        frequencies[word] = (frequencies[word] || 0) + 1;\n    });\n    return frequencies;\n}\nfunction calculateTechnicalDensity(text) {\n    const technicalPatterns = [\n        /\\b\\w*(?:ology|ism|tion|sion|ment|ness|ity|ive|ical|able|ible|graphy|metry|nomy|pathy|phobia|philia|ization|ification)\\b/gi,\n        /\\b[A-Z]{2,6}\\b/g,\n        /\\b\\w*\\d+\\w*\\b/g\n    ];\n    let technicalCount = 0;\n    technicalPatterns.forEach((pattern)=>{\n        const matches = text.match(pattern);\n        if (matches) technicalCount += matches.length;\n    });\n    const totalWords = (text.match(/\\b\\w+\\b/g) || []).length;\n    return totalWords > 0 ? technicalCount / totalWords : 0;\n}\nfunction identifySemanticClusters(text) {\n    // Group related terms based on co-occurrence and semantic patterns\n    const clusters = [];\n    // Common semantic clusters in academic papers\n    const clusterPatterns = [\n        // Research methodology cluster\n        [\n            \"research\",\n            \"study\",\n            \"experiment\",\n            \"method\",\n            \"analysis\",\n            \"data\",\n            \"results\",\n            \"findings\"\n        ],\n        // Technical implementation cluster\n        [\n            \"algorithm\",\n            \"model\",\n            \"system\",\n            \"framework\",\n            \"approach\",\n            \"technique\",\n            \"methodology\"\n        ],\n        // Statistical analysis cluster\n        [\n            \"statistical\",\n            \"correlation\",\n            \"regression\",\n            \"significance\",\n            \"hypothesis\",\n            \"p-value\",\n            \"confidence\"\n        ],\n        // Machine learning cluster\n        [\n            \"machine\",\n            \"learning\",\n            \"neural\",\n            \"network\",\n            \"artificial\",\n            \"intelligence\",\n            \"algorithm\",\n            \"model\"\n        ],\n        // Performance evaluation cluster\n        [\n            \"performance\",\n            \"accuracy\",\n            \"efficiency\",\n            \"evaluation\",\n            \"assessment\",\n            \"measurement\",\n            \"benchmark\"\n        ]\n    ];\n    clusterPatterns.forEach((cluster)=>{\n        const foundTerms = cluster.filter((term)=>new RegExp(`\\\\b${term}\\\\b`, \"i\").test(text));\n        if (foundTerms.length >= 2) {\n            clusters.push(foundTerms);\n        }\n    });\n    return clusters;\n}\nfunction calculateContextualImportance(text) {\n    const importance = {};\n    // Terms that appear in multiple sections are more important\n    const sections = extractDocumentSections(text);\n    const allSectionText = Object.values(sections).join(\" \");\n    // Calculate importance based on section presence and frequency\n    const words = allSectionText.toLowerCase().match(/\\b[a-zA-Z]{4,}\\b/g) || [];\n    const wordCounts = {};\n    words.forEach((word)=>{\n        wordCounts[word] = (wordCounts[word] || 0) + 1;\n    });\n    Object.entries(wordCounts).forEach(([word, count])=>{\n        // Importance score based on frequency and section diversity\n        let score = count;\n        Object.values(sections).forEach((section)=>{\n            if (section.toLowerCase().includes(word)) {\n                score += 1;\n            }\n        });\n        importance[word] = score;\n    });\n    return importance;\n}\nfunction identifyDomainIndicators(text) {\n    const domainPatterns = [\n        // Computer Science\n        /\\b(?:algorithm|programming|software|hardware|database|network|security|artificial|intelligence|machine|learning)\\b/gi,\n        // Medicine/Biology\n        /\\b(?:patient|clinical|medical|biological|genetic|protein|cell|disease|treatment|therapy)\\b/gi,\n        // Psychology\n        /\\b(?:psychological|behavior|cognitive|mental|therapy|counseling|assessment|personality)\\b/gi,\n        // Economics\n        /\\b(?:economic|financial|market|investment|revenue|profit|cost|price|demand|supply)\\b/gi,\n        // Physics\n        /\\b(?:quantum|particle|energy|force|motion|wave|field|electromagnetic|nuclear|atomic)\\b/gi\n    ];\n    const domains = [];\n    domainPatterns.forEach((pattern, index)=>{\n        const matches = text.match(pattern);\n        if (matches && matches.length > 3) {\n            const domainNames = [\n                \"Computer Science\",\n                \"Medicine/Biology\",\n                \"Psychology\",\n                \"Economics\",\n                \"Physics\"\n            ];\n            domains.push(domainNames[index]);\n        }\n    });\n    return domains;\n}\nfunction extractTechnicalTerms(text, fingerprint) {\n    const keywords = [];\n    const technicalPatterns = [\n        // Acronyms\n        {\n            pattern: /\\b[A-Z]{2,6}\\b/g,\n            weight: 0.9\n        },\n        // Technical suffixes\n        {\n            pattern: /\\b\\w*(?:ology|ism|tion|sion|ment|ness|ity|ive|ical|able|ible|graphy|metry|nomy|pathy|phobia|philia|ization|ification)\\b/gi,\n            weight: 0.8\n        },\n        // Scientific notation\n        {\n            pattern: /\\b\\w*\\d+\\w*\\b/g,\n            weight: 0.7\n        },\n        // Compound terms\n        {\n            pattern: /\\b\\w+(?:-|_)\\w+\\b/g,\n            weight: 0.6\n        }\n    ];\n    technicalPatterns.forEach(({ pattern, weight })=>{\n        const matches = text.match(pattern);\n        if (matches) {\n            matches.forEach((match)=>{\n                if (match.length > 2 && !isCommonWord(match)) {\n                    keywords.push({\n                        word: match,\n                        context: extractContext(text, match),\n                        score: weight * (fingerprint.wordFrequencies[match.toLowerCase()] || 1)\n                    });\n                }\n            });\n        }\n    });\n    return keywords;\n}\nfunction extractFrequentIntegralTerms(text, fingerprint) {\n    const keywords = [];\n    Object.entries(fingerprint.wordFrequencies).forEach(([word, count])=>{\n        const frequency = count;\n        if (frequency >= 3 && word.length > 3 && !isCommonWord(word)) {\n            const contextualScore = fingerprint.contextualImportance[word] || frequency;\n            keywords.push({\n                word: word.charAt(0).toUpperCase() + word.slice(1),\n                context: extractContext(text, word),\n                score: contextualScore * 0.5\n            });\n        }\n    });\n    return keywords;\n}\nfunction extractContextualKeywords(text, fingerprint) {\n    const keywords = [];\n    // Extract terms that appear in multiple sections\n    const sectionTerms = {};\n    Object.entries(fingerprint.sections).forEach(([sectionName, sectionText])=>{\n        if (sectionText && typeof sectionText === \"string\") {\n            const words = sectionText.toLowerCase().match(/\\b[a-zA-Z]{4,}\\b/g) || [];\n            words.forEach((word)=>{\n                if (!isCommonWord(word)) {\n                    sectionTerms[word] = (sectionTerms[word] || 0) + 1;\n                }\n            });\n        }\n    });\n    Object.entries(sectionTerms).forEach(([word, sectionCount])=>{\n        if (sectionCount >= 2) {\n            keywords.push({\n                word: word.charAt(0).toUpperCase() + word.slice(1),\n                context: extractContext(text, word),\n                score: sectionCount * 0.7\n            });\n        }\n    });\n    return keywords;\n}\nfunction extractDomainSpecificTerms(text, fingerprint) {\n    const keywords = [];\n    // Domain-specific term patterns\n    const domainTerms = [\n        // Research terms\n        \"hypothesis\",\n        \"methodology\",\n        \"empirical\",\n        \"quantitative\",\n        \"qualitative\",\n        \"longitudinal\",\n        \"cross-sectional\",\n        // Statistical terms\n        \"correlation\",\n        \"regression\",\n        \"significance\",\n        \"p-value\",\n        \"confidence\",\n        \"interval\",\n        \"effect\",\n        \"size\",\n        // Technical terms\n        \"algorithm\",\n        \"optimization\",\n        \"implementation\",\n        \"evaluation\",\n        \"benchmark\",\n        \"performance\",\n        \"accuracy\",\n        // Scientific terms\n        \"experiment\",\n        \"observation\",\n        \"measurement\",\n        \"analysis\",\n        \"synthesis\",\n        \"validation\",\n        \"verification\"\n    ];\n    domainTerms.forEach((term)=>{\n        const regex = new RegExp(`\\\\b${term}\\\\b`, \"gi\");\n        const matches = text.match(regex);\n        if (matches && matches.length > 0) {\n            keywords.push({\n                word: term.charAt(0).toUpperCase() + term.slice(1),\n                context: extractContext(text, term),\n                score: matches.length * 0.6\n            });\n        }\n    });\n    return keywords;\n}\nfunction extractSemanticClusters(text, fingerprint) {\n    const keywords = [];\n    fingerprint.semanticClusters.forEach((cluster)=>{\n        cluster.forEach((term)=>{\n            const regex = new RegExp(`\\\\b${term}\\\\b`, \"gi\");\n            const matches = text.match(regex);\n            if (matches && matches.length > 0) {\n                keywords.push({\n                    word: term.charAt(0).toUpperCase() + term.slice(1),\n                    context: extractContext(text, term),\n                    score: matches.length * 0.4\n                });\n            }\n        });\n    });\n    return keywords;\n}\nfunction extractMultiWordPhrases(text, fingerprint) {\n    const keywords = [];\n    // Common multi-word technical phrases\n    const phrasePatterns = [\n        // Scientific phrases\n        {\n            pattern: /\\b(?:deep sea|cell death|protein synthesis|DNA replication|gene expression|cell division|immune response|neural network|machine learning|artificial intelligence|data analysis|statistical significance|control group|experimental design)\\b/gi,\n            weight: 0.9\n        },\n        // Medical/Biological phrases\n        {\n            pattern: /\\b(?:blood pressure|heart rate|brain function|muscle contraction|enzyme activity|hormone levels|immune system|nervous system|cardiovascular system|respiratory system)\\b/gi,\n            weight: 0.9\n        },\n        // Technical phrases\n        {\n            pattern: /\\b(?:user interface|database management|network security|software development|hardware configuration|data processing|algorithm design|system architecture|cloud computing|mobile application)\\b/gi,\n            weight: 0.8\n        },\n        // Academic phrases\n        {\n            pattern: /\\b(?:research methodology|literature review|data collection|statistical analysis|hypothesis testing|peer review|academic writing|theoretical framework|empirical evidence|qualitative research|quantitative research)\\b/gi,\n            weight: 0.8\n        },\n        // General compound terms\n        {\n            pattern: /\\b(?:high school|middle school|elementary school|university level|graduate level|undergraduate level|post graduate|doctoral degree|master's degree|bachelor's degree)\\b/gi,\n            weight: 0.7\n        },\n        // Time-related phrases\n        {\n            pattern: /\\b(?:long term|short term|medium term|real time|over time|in time|on time|at the time|for the time|during the time)\\b/gi,\n            weight: 0.6\n        },\n        // Location phrases\n        {\n            pattern: /\\b(?:north america|south america|european union|middle east|far east|central asia|southeast asia|sub saharan|latin america|north africa)\\b/gi,\n            weight: 0.6\n        }\n    ];\n    phrasePatterns.forEach(({ pattern, weight })=>{\n        const matches = text.match(pattern);\n        if (matches) {\n            matches.forEach((match)=>{\n                const phrase = match.trim();\n                if (phrase.length > 3 && !isCommonPhrase(phrase)) {\n                    keywords.push({\n                        word: phrase,\n                        context: extractContext(text, phrase),\n                        score: weight * (fingerprint.wordFrequencies[phrase.toLowerCase()] || 1)\n                    });\n                }\n            });\n        }\n    });\n    // Extract custom phrases from the document (2-4 word combinations that appear frequently)\n    const words = text.toLowerCase().match(/\\b[a-zA-Z]{3,}\\b/g) || [];\n    const phraseCounts = {};\n    // Look for 2-word phrases\n    for(let i = 0; i < words.length - 1; i++){\n        const phrase = `${words[i]} ${words[i + 1]}`;\n        if (!isCommonPhrase(phrase)) {\n            phraseCounts[phrase] = (phraseCounts[phrase] || 0) + 1;\n        }\n    }\n    // Look for 3-word phrases\n    for(let i = 0; i < words.length - 2; i++){\n        const phrase = `${words[i]} ${words[i + 1]} ${words[i + 2]}`;\n        if (!isCommonPhrase(phrase)) {\n            phraseCounts[phrase] = (phraseCounts[phrase] || 0) + 1;\n        }\n    }\n    // Add frequent custom phrases\n    Object.entries(phraseCounts).forEach(([phrase, count])=>{\n        if (count >= 2 && phrase.length > 5) {\n            keywords.push({\n                word: phrase.split(\" \").map((word)=>word.charAt(0).toUpperCase() + word.slice(1)).join(\" \"),\n                context: extractContext(text, phrase),\n                score: count * 0.5\n            });\n        }\n    });\n    return keywords;\n}\nfunction isCommonPhrase(phrase) {\n    const commonPhrases = [\n        \"the same\",\n        \"in the\",\n        \"on the\",\n        \"at the\",\n        \"for the\",\n        \"with the\",\n        \"to the\",\n        \"of the\",\n        \"and the\",\n        \"or the\",\n        \"this is\",\n        \"that is\",\n        \"there is\",\n        \"there are\",\n        \"it is\",\n        \"it was\",\n        \"it has\",\n        \"it will\",\n        \"it can\",\n        \"it may\",\n        \"as well\",\n        \"as well as\",\n        \"such as\",\n        \"for example\",\n        \"for instance\",\n        \"in addition\",\n        \"in fact\",\n        \"in order\",\n        \"at least\",\n        \"at most\",\n        \"at all\",\n        \"at once\",\n        \"at first\",\n        \"at last\",\n        \"at best\",\n        \"at worst\",\n        \"on the other hand\",\n        \"on the contrary\",\n        \"on average\",\n        \"on purpose\",\n        \"on time\",\n        \"on schedule\",\n        \"in general\",\n        \"in particular\",\n        \"in detail\",\n        \"in summary\",\n        \"in conclusion\",\n        \"in other words\",\n        \"for the most part\",\n        \"for the time being\",\n        \"for the sake of\",\n        \"for the purpose of\",\n        \"as a result\",\n        \"as a matter of fact\",\n        \"as a whole\",\n        \"as a rule\",\n        \"as a consequence\",\n        \"due to\",\n        \"because of\",\n        \"in spite of\",\n        \"instead of\",\n        \"rather than\",\n        \"more than\",\n        \"less than\",\n        \"up to\",\n        \"down to\",\n        \"over to\",\n        \"under to\",\n        \"through to\",\n        \"across to\",\n        \"around to\",\n        \"deep sea\",\n        \"cell death\",\n        \"protein synthesis\",\n        \"DNA replication\",\n        \"gene expression\"\n    ];\n    return commonPhrases.includes(phrase.toLowerCase());\n}\nasync function generateDefinition(word, text, fingerprint) {\n    // Check if OpenAI API key is configured\n    if (!process.env.OPENAI_API_KEY || process.env.OPENAI_API_KEY === \"your-openai-api-key\") {\n        console.log(\"OpenAI API key not configured, using fallback semantic analysis for:\", word);\n        return Promise.resolve({\n            definition: generateSemanticDefinition(word, text, fingerprint),\n            isGPT: false\n        });\n    }\n    try {\n        // Use GPT to generate intelligent keyword definition\n        const context = extractContext(text, word, 200);\n        const domains = fingerprint.domainIndicators.join(\", \") || \"general\";\n        const prompt = `\nAnalyze the following keyword and provide a clear, concise definition based on its usage in the document context. Focus on:\n\n1. What the term means in this specific context\n2. Its role or function in the document\n3. Any technical or domain-specific meaning\n4. Keep the definition informative but accessible\n\nKeyword: \"${word}\"\nDocument Context: \"${context}\"\nDomain: ${domains}\n\nProvide a clear, helpful definition in 1-2 sentences:`;\n        const response = await openai.chat.completions.create({\n            model: \"gpt-4\",\n            messages: [\n                {\n                    role: \"system\",\n                    content: \"You are a helpful assistant that provides clear, concise definitions of technical terms based on their usage in documents. Focus on making complex concepts accessible and understandable.\"\n                },\n                {\n                    role: \"user\",\n                    content: prompt\n                }\n            ],\n            max_tokens: 150,\n            temperature: 0.7\n        });\n        const definition = response.choices[0]?.message?.content?.trim();\n        return Promise.resolve({\n            definition: definition || generateSemanticDefinition(word, text, fingerprint),\n            isGPT: !!definition\n        });\n    } catch (error) {\n        console.error(\"GPT keyword definition generation failed for:\", word, error);\n        return Promise.resolve({\n            definition: generateSemanticDefinition(word, text, fingerprint),\n            isGPT: false\n        });\n    }\n}\nfunction generateSemanticDefinition(word, text, fingerprint) {\n    // Generate contextual definition based on usage patterns\n    const context = extractContext(text, word, 200);\n    // Look for definition patterns\n    const definitionPatterns = [\n        new RegExp(`${word}\\\\s*(?:is|are|refers to|means|denotes|represents)\\\\s*([^.]{10,100})`, \"i\"),\n        new RegExp(`(?:is|are|refers to|means|denotes|represents)\\\\s*${word}\\\\s*([^.]{10,100})`, \"i\"),\n        new RegExp(`${word}\\\\s*\\\\(([^)]{10,100})\\\\)`, \"i\")\n    ];\n    for (const pattern of definitionPatterns){\n        const match = context.match(pattern);\n        if (match) {\n            return match[1].trim();\n        }\n    }\n    // Fallback: generate definition based on domain and context\n    const domains = fingerprint.domainIndicators;\n    if (domains.length > 0) {\n        return `A ${domains[0].toLowerCase()} term referring to ${word.toLowerCase()}`;\n    }\n    return `A technical term used in this context`;\n}\nfunction isCommonWord(word) {\n    const commonWords = new Set([\n        \"the\",\n        \"and\",\n        \"for\",\n        \"are\",\n        \"but\",\n        \"not\",\n        \"you\",\n        \"all\",\n        \"can\",\n        \"had\",\n        \"her\",\n        \"was\",\n        \"one\",\n        \"our\",\n        \"out\",\n        \"day\",\n        \"get\",\n        \"has\",\n        \"him\",\n        \"his\",\n        \"how\",\n        \"its\",\n        \"may\",\n        \"new\",\n        \"now\",\n        \"old\",\n        \"see\",\n        \"two\",\n        \"who\",\n        \"boy\",\n        \"did\",\n        \"man\",\n        \"men\",\n        \"put\",\n        \"say\",\n        \"she\",\n        \"too\",\n        \"use\",\n        \"way\",\n        \"will\",\n        \"with\",\n        \"this\",\n        \"that\",\n        \"they\",\n        \"have\",\n        \"been\",\n        \"were\",\n        \"said\",\n        \"each\",\n        \"which\",\n        \"their\",\n        \"time\",\n        \"about\",\n        \"there\",\n        \"could\",\n        \"other\",\n        \"after\",\n        \"first\",\n        \"well\",\n        \"also\",\n        \"where\",\n        \"much\",\n        \"some\",\n        \"these\",\n        \"than\",\n        \"would\",\n        \"like\",\n        \"into\",\n        \"more\",\n        \"come\",\n        \"made\",\n        \"many\",\n        \"most\",\n        \"over\",\n        \"such\",\n        \"take\",\n        \"than\",\n        \"them\",\n        \"very\",\n        \"when\",\n        \"work\",\n        \"year\",\n        \"your\",\n        \"good\",\n        \"know\",\n        \"just\",\n        \"long\",\n        \"make\",\n        \"right\",\n        \"same\",\n        \"seem\",\n        \"tell\",\n        \"turn\",\n        \"want\",\n        \"went\",\n        \"were\",\n        \"what\",\n        \"when\",\n        \"will\",\n        \"with\",\n        \"work\",\n        \"year\",\n        \"your\",\n        \"here\",\n        \"there\",\n        \"where\",\n        \"why\",\n        \"how\",\n        \"what\",\n        \"when\",\n        \"where\",\n        \"why\",\n        \"how\",\n        \"what\",\n        \"when\",\n        \"where\",\n        \"why\",\n        \"how\",\n        \"what\",\n        \"when\"\n    ]);\n    return commonWords.has(word.toLowerCase());\n}\nfunction extractContext(text, term, contextLength = 100) {\n    const index = text.toLowerCase().indexOf(term.toLowerCase());\n    if (index === -1) return \"\";\n    const start = Math.max(0, index - contextLength);\n    const end = Math.min(text.length, index + term.length + contextLength);\n    return text.substring(start, end).trim();\n}\nfunction cleanTextForKeywordDetection(text) {\n    let cleanedText = text;\n    // Remove references/bibliography sections\n    cleanedText = cleanedText.replace(/(references?|bibliography|works cited|sources?)\\s*:?.*$/gim, \"\");\n    // Remove Creative Commons and copyright information\n    cleanedText = cleanedText.replace(/creative commons.*?$/gim, \"\");\n    cleanedText = cleanedText.replace(/copyright.*?$/gim, \"\");\n    cleanedText = cleanedText.replace(/©.*?$/gim, \"\");\n    cleanedText = cleanedText.replace(/all rights reserved.*?$/gim, \"\");\n    // Remove author affiliations and acknowledgments\n    cleanedText = cleanedText.replace(/acknowledgments?.*?$/gim, \"\");\n    cleanedText = cleanedText.replace(/funding.*?$/gim, \"\");\n    cleanedText = cleanedText.replace(/author affiliations?.*?$/gim, \"\");\n    // Remove abstract and metadata sections\n    cleanedText = cleanedText.replace(/abstract\\s*:?.*?(?=\\n\\n|\\n[A-Z]|$)/gim, \"\");\n    cleanedText = cleanedText.replace(/keywords?\\s*:?.*?(?=\\n\\n|\\n[A-Z]|$)/gim, \"\");\n    // Remove page numbers and headers/footers\n    cleanedText = cleanedText.replace(/^\\s*\\d+\\s*$/gm, \"\") // Standalone page numbers\n    ;\n    cleanedText = cleanedText.replace(/^page \\d+.*$/gim, \"\") // \"Page X\" headers\n    ;\n    // Remove legal disclaimers and boilerplate\n    cleanedText = cleanedText.replace(/disclaimer.*?$/gim, \"\");\n    cleanedText = cleanedText.replace(/terms of use.*?$/gim, \"\");\n    cleanedText = cleanedText.replace(/privacy policy.*?$/gim, \"\");\n    // Remove excessive whitespace and normalize\n    cleanedText = cleanedText.replace(/\\n\\s*\\n\\s*\\n/g, \"\\n\\n\") // Multiple newlines to double\n    ;\n    cleanedText = cleanedText.replace(/^\\s+|\\s+$/gm, \"\") // Trim each line\n    ;\n    cleanedText = cleanedText.trim();\n    return cleanedText;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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aUosY0FBY0EsWUFBWUMsT0FBTyxDQUFDLDhEQUE4RDtJQUVoRyxvREFBb0Q7SUFDcERELGNBQWNBLFlBQVlDLE9BQU8sQ0FBQywyQkFBMkI7SUFDN0RELGNBQWNBLFlBQVlDLE9BQU8sQ0FBQyxvQkFBb0I7SUFDdERELGNBQWNBLFlBQVlDLE9BQU8sQ0FBQyxZQUFZO0lBQzlDRCxjQUFjQSxZQUFZQyxPQUFPLENBQUMsOEJBQThCO0lBRWhFLGlEQUFpRDtJQUNqREQsY0FBY0EsWUFBWUMsT0FBTyxDQUFDLDJCQUEyQjtJQUM3REQsY0FBY0EsWUFBWUMsT0FBTyxDQUFDLGtCQUFrQjtJQUNwREQsY0FBY0EsWUFBWUMsT0FBTyxDQUFDLCtCQUErQjtJQUVqRSx3Q0FBd0M7SUFDeENELGNBQWNBLFlBQVlDLE9BQU8sQ0FBQyx5Q0FBeUM7SUFDM0VELGNBQWNBLFlBQVlDLE9BQU8sQ0FBQywwQ0FBMEM7SUFFNUUsMENBQTBDO0lBQzFDRCxjQUFjQSxZQUFZQyxPQUFPLENBQUMsaUJBQWlCLElBQUksMEJBQTBCOztJQUNqRkQsY0FBY0EsWUFBWUMsT0FBTyxDQUFDLG1CQUFtQixJQUFJLG1CQUFtQjs7SUFFNUUsMkNBQTJDO0lBQzNDRCxjQUFjQSxZQUFZQyxPQUFPLENBQUMscUJBQXFCO0lBQ3ZERCxjQUFjQSxZQUFZQyxPQUFPLENBQUMsdUJBQXVCO0lBQ3pERCxjQUFjQSxZQUFZQyxPQUFPLENBQUMseUJBQXlCO0lBRTNELDRDQUE0QztJQUM1Q0QsY0FBY0EsWUFBWUMsT0FBTyxDQUFDLGlCQUFpQixRQUFRLDhCQUE4Qjs7SUFDekZELGNBQWNBLFlBQVlDLE9BQU8sQ0FBQyxlQUFlLElBQUksaUJBQWlCOztJQUN0RUQsY0FBY0EsWUFBWXhFLElBQUk7SUFFOUIsT0FBT3dFO0FBQ1QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wZGYta2V5d29yZC1hbmFseXplci8uL2FwcC9hcGkvZGV0ZWN0LWtleXdvcmRzL3JvdXRlLnRzP2JkNGQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJ1xuaW1wb3J0IE9wZW5BSSBmcm9tICdvcGVuYWknXG5cbmNvbnN0IG9wZW5haSA9IG5ldyBPcGVuQUkoe1xuICBhcGlLZXk6IHByb2Nlc3MuZW52Lk9QRU5BSV9BUElfS0VZLFxufSlcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IHRleHQgfSA9IGF3YWl0IHJlcXVlc3QuanNvbigpXG5cbiAgICBpZiAoIXRleHQpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnVGV4dCBpcyByZXF1aXJlZCcgfSwgeyBzdGF0dXM6IDQwMCB9KVxuICAgIH1cblxuICAgIC8vIFVzZSBzZW1hbnRpYyBmaW5nZXJwcmludC1iYXNlZCBrZXl3b3JkIGRldGVjdGlvblxuICAgIGNvbnN0IGtleXdvcmRzID0gYXdhaXQgc2VtYW50aWNGaW5nZXJwcmludEtleXdvcmREZXRlY3Rpb24odGV4dClcbiAgICBcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsga2V5d29yZHMgfSlcblxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRldGVjdGluZyBrZXl3b3JkczonLCBlcnJvcilcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IGVycm9yOiAnRmFpbGVkIHRvIGRldGVjdCBrZXl3b3JkcycgfSxcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgIClcbiAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBzZW1hbnRpY0ZpbmdlcnByaW50S2V5d29yZERldGVjdGlvbih0ZXh0OiBzdHJpbmcpOiBQcm9taXNlPEFycmF5PHsgd29yZDogc3RyaW5nOyBkZWZpbml0aW9uOiBzdHJpbmc7IGNvbnRleHQ6IHN0cmluZzsgaXNHUFQ6IGJvb2xlYW4gfT4+IHtcbiAgY29uc3Qga2V5d29yZHM6IEFycmF5PHsgd29yZDogc3RyaW5nOyBjb250ZXh0OiBzdHJpbmc7IHNjb3JlOiBudW1iZXIgfT4gPSBbXVxuICBjb25zdCBmb3VuZFRlcm1zID0gbmV3IFNldDxzdHJpbmc+KClcbiAgXG4gIC8vIENsZWFuIHRoZSB0ZXh0IHRvIHJlbW92ZSBub24tY29udGVudCBzZWN0aW9uc1xuICBjb25zdCBjbGVhblRleHQgPSBjbGVhblRleHRGb3JLZXl3b3JkRGV0ZWN0aW9uKHRleHQpXG4gIFxuICAvLyBTZW1hbnRpYyBmaW5nZXJwcmludCBhbmFseXNpc1xuICBjb25zdCBzZW1hbnRpY0ZpbmdlcnByaW50ID0gYW5hbHl6ZVNlbWFudGljRmluZ2VycHJpbnQoY2xlYW5UZXh0KVxuICBcbiAgLy8gRXh0cmFjdCBrZXl3b3JkcyB1c2luZyBtdWx0aXBsZSBzZW1hbnRpYyBzdHJhdGVnaWVzXG4gIGNvbnN0IHN0cmF0ZWdpZXMgPSBbXG4gICAgKCkgPT4gZXh0cmFjdFRlY2huaWNhbFRlcm1zKGNsZWFuVGV4dCwgc2VtYW50aWNGaW5nZXJwcmludCksXG4gICAgKCkgPT4gZXh0cmFjdEZyZXF1ZW50SW50ZWdyYWxUZXJtcyhjbGVhblRleHQsIHNlbWFudGljRmluZ2VycHJpbnQpLFxuICAgICgpID0+IGV4dHJhY3RDb250ZXh0dWFsS2V5d29yZHMoY2xlYW5UZXh0LCBzZW1hbnRpY0ZpbmdlcnByaW50KSxcbiAgICAoKSA9PiBleHRyYWN0RG9tYWluU3BlY2lmaWNUZXJtcyhjbGVhblRleHQsIHNlbWFudGljRmluZ2VycHJpbnQpLFxuICAgICgpID0+IGV4dHJhY3RTZW1hbnRpY0NsdXN0ZXJzKGNsZWFuVGV4dCwgc2VtYW50aWNGaW5nZXJwcmludCksXG4gICAgKCkgPT4gZXh0cmFjdE11bHRpV29yZFBocmFzZXMoY2xlYW5UZXh0LCBzZW1hbnRpY0ZpbmdlcnByaW50KVxuICBdXG4gIFxuICBzdHJhdGVnaWVzLmZvckVhY2goc3RyYXRlZ3kgPT4ge1xuICAgIGNvbnN0IGV4dHJhY3RlZEtleXdvcmRzID0gc3RyYXRlZ3koKVxuICAgIGV4dHJhY3RlZEtleXdvcmRzLmZvckVhY2goa2V5d29yZCA9PiB7XG4gICAgICBpZiAoIWZvdW5kVGVybXMuaGFzKGtleXdvcmQud29yZC50b0xvd2VyQ2FzZSgpKSkge1xuICAgICAgICBmb3VuZFRlcm1zLmFkZChrZXl3b3JkLndvcmQudG9Mb3dlckNhc2UoKSlcbiAgICAgICAga2V5d29yZHMucHVzaChrZXl3b3JkKVxuICAgICAgfVxuICAgIH0pXG4gIH0pXG4gIFxuICAvLyBSZW1vdmUgZHVwbGljYXRlcyBhbmQgc29ydCBieSBzZW1hbnRpYyBpbXBvcnRhbmNlIHNjb3JlXG4gIGNvbnN0IHVuaXF1ZUtleXdvcmRzID0ga2V5d29yZHMuZmlsdGVyKChrZXl3b3JkLCBpbmRleCwgc2VsZikgPT4gXG4gICAgaW5kZXggPT09IHNlbGYuZmluZEluZGV4KGsgPT4gay53b3JkLnRvTG93ZXJDYXNlKCkgPT09IGtleXdvcmQud29yZC50b0xvd2VyQ2FzZSgpKVxuICApXG4gIFxuICAvLyBTb3J0IGJ5IHNlbWFudGljIGltcG9ydGFuY2Ugc2NvcmUgKGhpZ2hlciBpcyBiZXR0ZXIpXG4gIHVuaXF1ZUtleXdvcmRzLnNvcnQoKGEsIGIpID0+IGIuc2NvcmUgLSBhLnNjb3JlKVxuICBcbiAgLy8gUmV0dXJuIHRvcCAyMCBrZXl3b3JkcyB3aXRoIGRlZmluaXRpb25zIGFuZCBjb250ZXh0XG4gIGNvbnN0IGtleXdvcmRzV2l0aERlZmluaXRpb25zID0gYXdhaXQgUHJvbWlzZS5hbGwoXG4gICAgdW5pcXVlS2V5d29yZHMuc2xpY2UoMCwgMjApLm1hcChhc3luYyBrID0+IHtcbiAgICAgIGNvbnN0IGRlZmluaXRpb25SZXN1bHQgPSBhd2FpdCBnZW5lcmF0ZURlZmluaXRpb24oay53b3JkLCBjbGVhblRleHQsIHNlbWFudGljRmluZ2VycHJpbnQpXG4gICAgICByZXR1cm4ge1xuICAgICAgICB3b3JkOiBrLndvcmQsXG4gICAgICAgIGRlZmluaXRpb246IGRlZmluaXRpb25SZXN1bHQuZGVmaW5pdGlvbixcbiAgICAgICAgY29udGV4dDogay5jb250ZXh0LFxuICAgICAgICBpc0dQVDogZGVmaW5pdGlvblJlc3VsdC5pc0dQVFxuICAgICAgfVxuICAgIH0pXG4gIClcbiAgXG4gIHJldHVybiBrZXl3b3Jkc1dpdGhEZWZpbml0aW9uc1xufVxuXG5mdW5jdGlvbiBhbmFseXplU2VtYW50aWNGaW5nZXJwcmludCh0ZXh0OiBzdHJpbmcpIHtcbiAgY29uc3QgZmluZ2VycHJpbnQgPSB7XG4gICAgLy8gRG9jdW1lbnQgc3RydWN0dXJlIGFuYWx5c2lzXG4gICAgc2VjdGlvbnM6IGV4dHJhY3REb2N1bWVudFNlY3Rpb25zKHRleHQpLFxuICAgIFxuICAgIC8vIFdvcmQgZnJlcXVlbmN5IGFuYWx5c2lzXG4gICAgd29yZEZyZXF1ZW5jaWVzOiBjYWxjdWxhdGVXb3JkRnJlcXVlbmNpZXModGV4dCksXG4gICAgXG4gICAgLy8gVGVjaG5pY2FsIHRlcm0gZGVuc2l0eVxuICAgIHRlY2huaWNhbERlbnNpdHk6IGNhbGN1bGF0ZVRlY2huaWNhbERlbnNpdHkodGV4dCksXG4gICAgXG4gICAgLy8gU2VtYW50aWMgY2x1c3RlcnNcbiAgICBzZW1hbnRpY0NsdXN0ZXJzOiBpZGVudGlmeVNlbWFudGljQ2x1c3RlcnModGV4dCksXG4gICAgXG4gICAgLy8gQ29udGV4dHVhbCBpbXBvcnRhbmNlXG4gICAgY29udGV4dHVhbEltcG9ydGFuY2U6IGNhbGN1bGF0ZUNvbnRleHR1YWxJbXBvcnRhbmNlKHRleHQpLFxuICAgIFxuICAgIC8vIERvbWFpbiBpbmRpY2F0b3JzXG4gICAgZG9tYWluSW5kaWNhdG9yczogaWRlbnRpZnlEb21haW5JbmRpY2F0b3JzKHRleHQpXG4gIH1cbiAgXG4gIHJldHVybiBmaW5nZXJwcmludFxufVxuXG5mdW5jdGlvbiBleHRyYWN0RG9jdW1lbnRTZWN0aW9ucyh0ZXh0OiBzdHJpbmcpIHtcbiAgY29uc3Qgc2VjdGlvbnMgPSB7XG4gICAgYWJzdHJhY3Q6IGV4dHJhY3RTZWN0aW9uKHRleHQsIC9hYnN0cmFjdFxccyo6Py9pKSxcbiAgICBpbnRyb2R1Y3Rpb246IGV4dHJhY3RTZWN0aW9uKHRleHQsIC9pbnRyb2R1Y3Rpb25cXHMqOj8vaSksXG4gICAgbWV0aG9kb2xvZ3k6IGV4dHJhY3RTZWN0aW9uKHRleHQsIC9tZXRob2QoPzpvbG9neXxzKT9cXHMqOj8vaSksXG4gICAgcmVzdWx0czogZXh0cmFjdFNlY3Rpb24odGV4dCwgL3Jlc3VsdHM/XFxzKjo/L2kpLFxuICAgIGRpc2N1c3Npb246IGV4dHJhY3RTZWN0aW9uKHRleHQsIC9kaXNjdXNzaW9uXFxzKjo/L2kpLFxuICAgIGNvbmNsdXNpb246IGV4dHJhY3RTZWN0aW9uKHRleHQsIC9jb25jbHVzaW9uXFxzKjo/L2kpXG4gIH1cbiAgXG4gIHJldHVybiBzZWN0aW9uc1xufVxuXG5mdW5jdGlvbiBleHRyYWN0U2VjdGlvbih0ZXh0OiBzdHJpbmcsIHBhdHRlcm46IFJlZ0V4cCk6IHN0cmluZyB7XG4gIGNvbnN0IG1hdGNoID0gdGV4dC5tYXRjaChuZXcgUmVnRXhwKHBhdHRlcm4uc291cmNlICsgJyhbXFxcXHNcXFxcU10qPykoPz1cXFxcblxcXFxuW0EtWl18XFxcXG5bQS1aXVthLXpdK1xcXFxzKjo/fCQpJywgJ2knKSlcbiAgcmV0dXJuIG1hdGNoID8gbWF0Y2hbMV0udHJpbSgpIDogJydcbn1cblxuZnVuY3Rpb24gY2FsY3VsYXRlV29yZEZyZXF1ZW5jaWVzKHRleHQ6IHN0cmluZyk6IHsgW2tleTogc3RyaW5nXTogbnVtYmVyIH0ge1xuICBjb25zdCB3b3JkcyA9IHRleHQudG9Mb3dlckNhc2UoKS5tYXRjaCgvXFxiW2EtekEtWl17Myx9XFxiL2cpIHx8IFtdXG4gIGNvbnN0IGZyZXF1ZW5jaWVzOiB7IFtrZXk6IHN0cmluZ106IG51bWJlciB9ID0ge31cbiAgXG4gIHdvcmRzLmZvckVhY2god29yZCA9PiB7XG4gICAgZnJlcXVlbmNpZXNbd29yZF0gPSAoZnJlcXVlbmNpZXNbd29yZF0gfHwgMCkgKyAxXG4gIH0pXG4gIFxuICByZXR1cm4gZnJlcXVlbmNpZXNcbn1cblxuZnVuY3Rpb24gY2FsY3VsYXRlVGVjaG5pY2FsRGVuc2l0eSh0ZXh0OiBzdHJpbmcpOiBudW1iZXIge1xuICBjb25zdCB0ZWNobmljYWxQYXR0ZXJucyA9IFtcbiAgICAvXFxiXFx3Kig/Om9sb2d5fGlzbXx0aW9ufHNpb258bWVudHxuZXNzfGl0eXxpdmV8aWNhbHxhYmxlfGlibGV8Z3JhcGh5fG1ldHJ5fG5vbXl8cGF0aHl8cGhvYmlhfHBoaWxpYXxpemF0aW9ufGlmaWNhdGlvbilcXGIvZ2ksXG4gICAgL1xcYltBLVpdezIsNn1cXGIvZyxcbiAgICAvXFxiXFx3KlxcZCtcXHcqXFxiL2dcbiAgXVxuICBcbiAgbGV0IHRlY2huaWNhbENvdW50ID0gMFxuICB0ZWNobmljYWxQYXR0ZXJucy5mb3JFYWNoKHBhdHRlcm4gPT4ge1xuICAgIGNvbnN0IG1hdGNoZXMgPSB0ZXh0Lm1hdGNoKHBhdHRlcm4pXG4gICAgaWYgKG1hdGNoZXMpIHRlY2huaWNhbENvdW50ICs9IG1hdGNoZXMubGVuZ3RoXG4gIH0pXG4gIFxuICBjb25zdCB0b3RhbFdvcmRzID0gKHRleHQubWF0Y2goL1xcYlxcdytcXGIvZykgfHwgW10pLmxlbmd0aFxuICByZXR1cm4gdG90YWxXb3JkcyA+IDAgPyB0ZWNobmljYWxDb3VudCAvIHRvdGFsV29yZHMgOiAwXG59XG5cbmZ1bmN0aW9uIGlkZW50aWZ5U2VtYW50aWNDbHVzdGVycyh0ZXh0OiBzdHJpbmcpOiBzdHJpbmdbXVtdIHtcbiAgLy8gR3JvdXAgcmVsYXRlZCB0ZXJtcyBiYXNlZCBvbiBjby1vY2N1cnJlbmNlIGFuZCBzZW1hbnRpYyBwYXR0ZXJuc1xuICBjb25zdCBjbHVzdGVyczogc3RyaW5nW11bXSA9IFtdXG4gIFxuICAvLyBDb21tb24gc2VtYW50aWMgY2x1c3RlcnMgaW4gYWNhZGVtaWMgcGFwZXJzXG4gIGNvbnN0IGNsdXN0ZXJQYXR0ZXJucyA9IFtcbiAgICAvLyBSZXNlYXJjaCBtZXRob2RvbG9neSBjbHVzdGVyXG4gICAgWydyZXNlYXJjaCcsICdzdHVkeScsICdleHBlcmltZW50JywgJ21ldGhvZCcsICdhbmFseXNpcycsICdkYXRhJywgJ3Jlc3VsdHMnLCAnZmluZGluZ3MnXSxcbiAgICAvLyBUZWNobmljYWwgaW1wbGVtZW50YXRpb24gY2x1c3RlclxuICAgIFsnYWxnb3JpdGhtJywgJ21vZGVsJywgJ3N5c3RlbScsICdmcmFtZXdvcmsnLCAnYXBwcm9hY2gnLCAndGVjaG5pcXVlJywgJ21ldGhvZG9sb2d5J10sXG4gICAgLy8gU3RhdGlzdGljYWwgYW5hbHlzaXMgY2x1c3RlclxuICAgIFsnc3RhdGlzdGljYWwnLCAnY29ycmVsYXRpb24nLCAncmVncmVzc2lvbicsICdzaWduaWZpY2FuY2UnLCAnaHlwb3RoZXNpcycsICdwLXZhbHVlJywgJ2NvbmZpZGVuY2UnXSxcbiAgICAvLyBNYWNoaW5lIGxlYXJuaW5nIGNsdXN0ZXJcbiAgICBbJ21hY2hpbmUnLCAnbGVhcm5pbmcnLCAnbmV1cmFsJywgJ25ldHdvcmsnLCAnYXJ0aWZpY2lhbCcsICdpbnRlbGxpZ2VuY2UnLCAnYWxnb3JpdGhtJywgJ21vZGVsJ10sXG4gICAgLy8gUGVyZm9ybWFuY2UgZXZhbHVhdGlvbiBjbHVzdGVyXG4gICAgWydwZXJmb3JtYW5jZScsICdhY2N1cmFjeScsICdlZmZpY2llbmN5JywgJ2V2YWx1YXRpb24nLCAnYXNzZXNzbWVudCcsICdtZWFzdXJlbWVudCcsICdiZW5jaG1hcmsnXVxuICBdXG4gIFxuICBjbHVzdGVyUGF0dGVybnMuZm9yRWFjaChjbHVzdGVyID0+IHtcbiAgICBjb25zdCBmb3VuZFRlcm1zID0gY2x1c3Rlci5maWx0ZXIodGVybSA9PiBcbiAgICAgIG5ldyBSZWdFeHAoYFxcXFxiJHt0ZXJtfVxcXFxiYCwgJ2knKS50ZXN0KHRleHQpXG4gICAgKVxuICAgIGlmIChmb3VuZFRlcm1zLmxlbmd0aCA+PSAyKSB7XG4gICAgICBjbHVzdGVycy5wdXNoKGZvdW5kVGVybXMpXG4gICAgfVxuICB9KVxuICBcbiAgcmV0dXJuIGNsdXN0ZXJzXG59XG5cbmZ1bmN0aW9uIGNhbGN1bGF0ZUNvbnRleHR1YWxJbXBvcnRhbmNlKHRleHQ6IHN0cmluZyk6IHsgW2tleTogc3RyaW5nXTogbnVtYmVyIH0ge1xuICBjb25zdCBpbXBvcnRhbmNlOiB7IFtrZXk6IHN0cmluZ106IG51bWJlciB9ID0ge31cbiAgXG4gIC8vIFRlcm1zIHRoYXQgYXBwZWFyIGluIG11bHRpcGxlIHNlY3Rpb25zIGFyZSBtb3JlIGltcG9ydGFudFxuICBjb25zdCBzZWN0aW9ucyA9IGV4dHJhY3REb2N1bWVudFNlY3Rpb25zKHRleHQpXG4gIGNvbnN0IGFsbFNlY3Rpb25UZXh0ID0gT2JqZWN0LnZhbHVlcyhzZWN0aW9ucykuam9pbignICcpXG4gIFxuICAvLyBDYWxjdWxhdGUgaW1wb3J0YW5jZSBiYXNlZCBvbiBzZWN0aW9uIHByZXNlbmNlIGFuZCBmcmVxdWVuY3lcbiAgY29uc3Qgd29yZHMgPSBhbGxTZWN0aW9uVGV4dC50b0xvd2VyQ2FzZSgpLm1hdGNoKC9cXGJbYS16QS1aXXs0LH1cXGIvZykgfHwgW11cbiAgY29uc3Qgd29yZENvdW50czogeyBba2V5OiBzdHJpbmddOiBudW1iZXIgfSA9IHt9XG4gIFxuICB3b3Jkcy5mb3JFYWNoKHdvcmQgPT4ge1xuICAgIHdvcmRDb3VudHNbd29yZF0gPSAod29yZENvdW50c1t3b3JkXSB8fCAwKSArIDFcbiAgfSlcbiAgXG4gIE9iamVjdC5lbnRyaWVzKHdvcmRDb3VudHMpLmZvckVhY2goKFt3b3JkLCBjb3VudF0pID0+IHtcbiAgICAvLyBJbXBvcnRhbmNlIHNjb3JlIGJhc2VkIG9uIGZyZXF1ZW5jeSBhbmQgc2VjdGlvbiBkaXZlcnNpdHlcbiAgICBsZXQgc2NvcmUgPSBjb3VudFxuICAgIE9iamVjdC52YWx1ZXMoc2VjdGlvbnMpLmZvckVhY2goc2VjdGlvbiA9PiB7XG4gICAgICBpZiAoc2VjdGlvbi50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHdvcmQpKSB7XG4gICAgICAgIHNjb3JlICs9IDFcbiAgICAgIH1cbiAgICB9KVxuICAgIGltcG9ydGFuY2Vbd29yZF0gPSBzY29yZVxuICB9KVxuICBcbiAgcmV0dXJuIGltcG9ydGFuY2Vcbn1cblxuZnVuY3Rpb24gaWRlbnRpZnlEb21haW5JbmRpY2F0b3JzKHRleHQ6IHN0cmluZyk6IHN0cmluZ1tdIHtcbiAgY29uc3QgZG9tYWluUGF0dGVybnMgPSBbXG4gICAgLy8gQ29tcHV0ZXIgU2NpZW5jZVxuICAgIC9cXGIoPzphbGdvcml0aG18cHJvZ3JhbW1pbmd8c29mdHdhcmV8aGFyZHdhcmV8ZGF0YWJhc2V8bmV0d29ya3xzZWN1cml0eXxhcnRpZmljaWFsfGludGVsbGlnZW5jZXxtYWNoaW5lfGxlYXJuaW5nKVxcYi9naSxcbiAgICAvLyBNZWRpY2luZS9CaW9sb2d5XG4gICAgL1xcYig/OnBhdGllbnR8Y2xpbmljYWx8bWVkaWNhbHxiaW9sb2dpY2FsfGdlbmV0aWN8cHJvdGVpbnxjZWxsfGRpc2Vhc2V8dHJlYXRtZW50fHRoZXJhcHkpXFxiL2dpLFxuICAgIC8vIFBzeWNob2xvZ3lcbiAgICAvXFxiKD86cHN5Y2hvbG9naWNhbHxiZWhhdmlvcnxjb2duaXRpdmV8bWVudGFsfHRoZXJhcHl8Y291bnNlbGluZ3xhc3Nlc3NtZW50fHBlcnNvbmFsaXR5KVxcYi9naSxcbiAgICAvLyBFY29ub21pY3NcbiAgICAvXFxiKD86ZWNvbm9taWN8ZmluYW5jaWFsfG1hcmtldHxpbnZlc3RtZW50fHJldmVudWV8cHJvZml0fGNvc3R8cHJpY2V8ZGVtYW5kfHN1cHBseSlcXGIvZ2ksXG4gICAgLy8gUGh5c2ljc1xuICAgIC9cXGIoPzpxdWFudHVtfHBhcnRpY2xlfGVuZXJneXxmb3JjZXxtb3Rpb258d2F2ZXxmaWVsZHxlbGVjdHJvbWFnbmV0aWN8bnVjbGVhcnxhdG9taWMpXFxiL2dpXG4gIF1cbiAgXG4gIGNvbnN0IGRvbWFpbnM6IHN0cmluZ1tdID0gW11cbiAgZG9tYWluUGF0dGVybnMuZm9yRWFjaCgocGF0dGVybiwgaW5kZXgpID0+IHtcbiAgICBjb25zdCBtYXRjaGVzID0gdGV4dC5tYXRjaChwYXR0ZXJuKVxuICAgIGlmIChtYXRjaGVzICYmIG1hdGNoZXMubGVuZ3RoID4gMykge1xuICAgICAgY29uc3QgZG9tYWluTmFtZXMgPSBbJ0NvbXB1dGVyIFNjaWVuY2UnLCAnTWVkaWNpbmUvQmlvbG9neScsICdQc3ljaG9sb2d5JywgJ0Vjb25vbWljcycsICdQaHlzaWNzJ11cbiAgICAgIGRvbWFpbnMucHVzaChkb21haW5OYW1lc1tpbmRleF0pXG4gICAgfVxuICB9KVxuICBcbiAgcmV0dXJuIGRvbWFpbnNcbn1cblxuZnVuY3Rpb24gZXh0cmFjdFRlY2huaWNhbFRlcm1zKHRleHQ6IHN0cmluZywgZmluZ2VycHJpbnQ6IGFueSk6IEFycmF5PHsgd29yZDogc3RyaW5nOyBjb250ZXh0OiBzdHJpbmc7IHNjb3JlOiBudW1iZXIgfT4ge1xuICBjb25zdCBrZXl3b3JkczogQXJyYXk8eyB3b3JkOiBzdHJpbmc7IGNvbnRleHQ6IHN0cmluZzsgc2NvcmU6IG51bWJlciB9PiA9IFtdXG4gIFxuICBjb25zdCB0ZWNobmljYWxQYXR0ZXJucyA9IFtcbiAgICAvLyBBY3Jvbnltc1xuICAgIHsgcGF0dGVybjogL1xcYltBLVpdezIsNn1cXGIvZywgd2VpZ2h0OiAwLjkgfSxcbiAgICAvLyBUZWNobmljYWwgc3VmZml4ZXNcbiAgICB7IHBhdHRlcm46IC9cXGJcXHcqKD86b2xvZ3l8aXNtfHRpb258c2lvbnxtZW50fG5lc3N8aXR5fGl2ZXxpY2FsfGFibGV8aWJsZXxncmFwaHl8bWV0cnl8bm9teXxwYXRoeXxwaG9iaWF8cGhpbGlhfGl6YXRpb258aWZpY2F0aW9uKVxcYi9naSwgd2VpZ2h0OiAwLjggfSxcbiAgICAvLyBTY2llbnRpZmljIG5vdGF0aW9uXG4gICAgeyBwYXR0ZXJuOiAvXFxiXFx3KlxcZCtcXHcqXFxiL2csIHdlaWdodDogMC43IH0sXG4gICAgLy8gQ29tcG91bmQgdGVybXNcbiAgICB7IHBhdHRlcm46IC9cXGJcXHcrKD86LXxfKVxcdytcXGIvZywgd2VpZ2h0OiAwLjYgfVxuICBdXG4gIFxuICB0ZWNobmljYWxQYXR0ZXJucy5mb3JFYWNoKCh7IHBhdHRlcm4sIHdlaWdodCB9KSA9PiB7XG4gICAgY29uc3QgbWF0Y2hlcyA9IHRleHQubWF0Y2gocGF0dGVybilcbiAgICBpZiAobWF0Y2hlcykge1xuICAgICAgbWF0Y2hlcy5mb3JFYWNoKG1hdGNoID0+IHtcbiAgICAgICAgaWYgKG1hdGNoLmxlbmd0aCA+IDIgJiYgIWlzQ29tbW9uV29yZChtYXRjaCkpIHtcbiAgICAgICAgICBrZXl3b3Jkcy5wdXNoKHtcbiAgICAgICAgICAgIHdvcmQ6IG1hdGNoLFxuICAgICAgICAgICAgY29udGV4dDogZXh0cmFjdENvbnRleHQodGV4dCwgbWF0Y2gpLFxuICAgICAgICAgICAgc2NvcmU6IHdlaWdodCAqIChmaW5nZXJwcmludC53b3JkRnJlcXVlbmNpZXNbbWF0Y2gudG9Mb3dlckNhc2UoKV0gfHwgMSlcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH1cbiAgfSlcbiAgXG4gIHJldHVybiBrZXl3b3Jkc1xufVxuXG5mdW5jdGlvbiBleHRyYWN0RnJlcXVlbnRJbnRlZ3JhbFRlcm1zKHRleHQ6IHN0cmluZywgZmluZ2VycHJpbnQ6IGFueSk6IEFycmF5PHsgd29yZDogc3RyaW5nOyBjb250ZXh0OiBzdHJpbmc7IHNjb3JlOiBudW1iZXIgfT4ge1xuICBjb25zdCBrZXl3b3JkczogQXJyYXk8eyB3b3JkOiBzdHJpbmc7IGNvbnRleHQ6IHN0cmluZzsgc2NvcmU6IG51bWJlciB9PiA9IFtdXG4gIFxuICBPYmplY3QuZW50cmllcyhmaW5nZXJwcmludC53b3JkRnJlcXVlbmNpZXMpLmZvckVhY2goKFt3b3JkLCBjb3VudF0pID0+IHtcbiAgICBjb25zdCBmcmVxdWVuY3kgPSBjb3VudCBhcyBudW1iZXJcbiAgICBpZiAoZnJlcXVlbmN5ID49IDMgJiYgd29yZC5sZW5ndGggPiAzICYmICFpc0NvbW1vbldvcmQod29yZCkpIHtcbiAgICAgIGNvbnN0IGNvbnRleHR1YWxTY29yZSA9IGZpbmdlcnByaW50LmNvbnRleHR1YWxJbXBvcnRhbmNlW3dvcmRdIHx8IGZyZXF1ZW5jeVxuICAgICAga2V5d29yZHMucHVzaCh7XG4gICAgICAgIHdvcmQ6IHdvcmQuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyB3b3JkLnNsaWNlKDEpLFxuICAgICAgICBjb250ZXh0OiBleHRyYWN0Q29udGV4dCh0ZXh0LCB3b3JkKSxcbiAgICAgICAgc2NvcmU6IGNvbnRleHR1YWxTY29yZSAqIDAuNVxuICAgICAgfSlcbiAgICB9XG4gIH0pXG4gIFxuICByZXR1cm4ga2V5d29yZHNcbn1cblxuZnVuY3Rpb24gZXh0cmFjdENvbnRleHR1YWxLZXl3b3Jkcyh0ZXh0OiBzdHJpbmcsIGZpbmdlcnByaW50OiBhbnkpOiBBcnJheTx7IHdvcmQ6IHN0cmluZzsgY29udGV4dDogc3RyaW5nOyBzY29yZTogbnVtYmVyIH0+IHtcbiAgY29uc3Qga2V5d29yZHM6IEFycmF5PHsgd29yZDogc3RyaW5nOyBjb250ZXh0OiBzdHJpbmc7IHNjb3JlOiBudW1iZXIgfT4gPSBbXVxuICBcbiAgLy8gRXh0cmFjdCB0ZXJtcyB0aGF0IGFwcGVhciBpbiBtdWx0aXBsZSBzZWN0aW9uc1xuICBjb25zdCBzZWN0aW9uVGVybXM6IHsgW2tleTogc3RyaW5nXTogbnVtYmVyIH0gPSB7fVxuICBcbiAgT2JqZWN0LmVudHJpZXMoZmluZ2VycHJpbnQuc2VjdGlvbnMpLmZvckVhY2goKFtzZWN0aW9uTmFtZSwgc2VjdGlvblRleHRdKSA9PiB7XG4gICAgaWYgKHNlY3Rpb25UZXh0ICYmIHR5cGVvZiBzZWN0aW9uVGV4dCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGNvbnN0IHdvcmRzID0gc2VjdGlvblRleHQudG9Mb3dlckNhc2UoKS5tYXRjaCgvXFxiW2EtekEtWl17NCx9XFxiL2cpIHx8IFtdXG4gICAgICB3b3Jkcy5mb3JFYWNoKCh3b3JkOiBzdHJpbmcpID0+IHtcbiAgICAgICAgaWYgKCFpc0NvbW1vbldvcmQod29yZCkpIHtcbiAgICAgICAgICBzZWN0aW9uVGVybXNbd29yZF0gPSAoc2VjdGlvblRlcm1zW3dvcmRdIHx8IDApICsgMVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH1cbiAgfSlcbiAgXG4gIE9iamVjdC5lbnRyaWVzKHNlY3Rpb25UZXJtcykuZm9yRWFjaCgoW3dvcmQsIHNlY3Rpb25Db3VudF0pID0+IHtcbiAgICBpZiAoc2VjdGlvbkNvdW50ID49IDIpIHtcbiAgICAgIGtleXdvcmRzLnB1c2goe1xuICAgICAgICB3b3JkOiB3b3JkLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgd29yZC5zbGljZSgxKSxcbiAgICAgICAgY29udGV4dDogZXh0cmFjdENvbnRleHQodGV4dCwgd29yZCksXG4gICAgICAgIHNjb3JlOiBzZWN0aW9uQ291bnQgKiAwLjdcbiAgICAgIH0pXG4gICAgfVxuICB9KVxuICBcbiAgcmV0dXJuIGtleXdvcmRzXG59XG5cbmZ1bmN0aW9uIGV4dHJhY3REb21haW5TcGVjaWZpY1Rlcm1zKHRleHQ6IHN0cmluZywgZmluZ2VycHJpbnQ6IGFueSk6IEFycmF5PHsgd29yZDogc3RyaW5nOyBjb250ZXh0OiBzdHJpbmc7IHNjb3JlOiBudW1iZXIgfT4ge1xuICBjb25zdCBrZXl3b3JkczogQXJyYXk8eyB3b3JkOiBzdHJpbmc7IGNvbnRleHQ6IHN0cmluZzsgc2NvcmU6IG51bWJlciB9PiA9IFtdXG4gIFxuICAvLyBEb21haW4tc3BlY2lmaWMgdGVybSBwYXR0ZXJuc1xuICBjb25zdCBkb21haW5UZXJtcyA9IFtcbiAgICAvLyBSZXNlYXJjaCB0ZXJtc1xuICAgICdoeXBvdGhlc2lzJywgJ21ldGhvZG9sb2d5JywgJ2VtcGlyaWNhbCcsICdxdWFudGl0YXRpdmUnLCAncXVhbGl0YXRpdmUnLCAnbG9uZ2l0dWRpbmFsJywgJ2Nyb3NzLXNlY3Rpb25hbCcsXG4gICAgLy8gU3RhdGlzdGljYWwgdGVybXNcbiAgICAnY29ycmVsYXRpb24nLCAncmVncmVzc2lvbicsICdzaWduaWZpY2FuY2UnLCAncC12YWx1ZScsICdjb25maWRlbmNlJywgJ2ludGVydmFsJywgJ2VmZmVjdCcsICdzaXplJyxcbiAgICAvLyBUZWNobmljYWwgdGVybXNcbiAgICAnYWxnb3JpdGhtJywgJ29wdGltaXphdGlvbicsICdpbXBsZW1lbnRhdGlvbicsICdldmFsdWF0aW9uJywgJ2JlbmNobWFyaycsICdwZXJmb3JtYW5jZScsICdhY2N1cmFjeScsXG4gICAgLy8gU2NpZW50aWZpYyB0ZXJtc1xuICAgICdleHBlcmltZW50JywgJ29ic2VydmF0aW9uJywgJ21lYXN1cmVtZW50JywgJ2FuYWx5c2lzJywgJ3N5bnRoZXNpcycsICd2YWxpZGF0aW9uJywgJ3ZlcmlmaWNhdGlvbidcbiAgXVxuICBcbiAgZG9tYWluVGVybXMuZm9yRWFjaCh0ZXJtID0+IHtcbiAgICBjb25zdCByZWdleCA9IG5ldyBSZWdFeHAoYFxcXFxiJHt0ZXJtfVxcXFxiYCwgJ2dpJylcbiAgICBjb25zdCBtYXRjaGVzID0gdGV4dC5tYXRjaChyZWdleClcbiAgICBpZiAobWF0Y2hlcyAmJiBtYXRjaGVzLmxlbmd0aCA+IDApIHtcbiAgICAgIGtleXdvcmRzLnB1c2goe1xuICAgICAgICB3b3JkOiB0ZXJtLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgdGVybS5zbGljZSgxKSxcbiAgICAgICAgY29udGV4dDogZXh0cmFjdENvbnRleHQodGV4dCwgdGVybSksXG4gICAgICAgIHNjb3JlOiBtYXRjaGVzLmxlbmd0aCAqIDAuNlxuICAgICAgfSlcbiAgICB9XG4gIH0pXG4gIFxuICByZXR1cm4ga2V5d29yZHNcbn1cblxuZnVuY3Rpb24gZXh0cmFjdFNlbWFudGljQ2x1c3RlcnModGV4dDogc3RyaW5nLCBmaW5nZXJwcmludDogYW55KTogQXJyYXk8eyB3b3JkOiBzdHJpbmc7IGNvbnRleHQ6IHN0cmluZzsgc2NvcmU6IG51bWJlciB9PiB7XG4gIGNvbnN0IGtleXdvcmRzOiBBcnJheTx7IHdvcmQ6IHN0cmluZzsgY29udGV4dDogc3RyaW5nOyBzY29yZTogbnVtYmVyIH0+ID0gW11cbiAgXG4gIGZpbmdlcnByaW50LnNlbWFudGljQ2x1c3RlcnMuZm9yRWFjaCgoY2x1c3Rlcjogc3RyaW5nW10pID0+IHtcbiAgICBjbHVzdGVyLmZvckVhY2godGVybSA9PiB7XG4gICAgICBjb25zdCByZWdleCA9IG5ldyBSZWdFeHAoYFxcXFxiJHt0ZXJtfVxcXFxiYCwgJ2dpJylcbiAgICAgIGNvbnN0IG1hdGNoZXMgPSB0ZXh0Lm1hdGNoKHJlZ2V4KVxuICAgICAgaWYgKG1hdGNoZXMgJiYgbWF0Y2hlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGtleXdvcmRzLnB1c2goe1xuICAgICAgICAgIHdvcmQ6IHRlcm0uY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyB0ZXJtLnNsaWNlKDEpLFxuICAgICAgICAgIGNvbnRleHQ6IGV4dHJhY3RDb250ZXh0KHRleHQsIHRlcm0pLFxuICAgICAgICAgIHNjb3JlOiBtYXRjaGVzLmxlbmd0aCAqIDAuNFxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0pXG4gIH0pXG4gIFxuICByZXR1cm4ga2V5d29yZHNcbn1cblxuZnVuY3Rpb24gZXh0cmFjdE11bHRpV29yZFBocmFzZXModGV4dDogc3RyaW5nLCBmaW5nZXJwcmludDogYW55KTogQXJyYXk8eyB3b3JkOiBzdHJpbmc7IGNvbnRleHQ6IHN0cmluZzsgc2NvcmU6IG51bWJlciB9PiB7XG4gIGNvbnN0IGtleXdvcmRzOiBBcnJheTx7IHdvcmQ6IHN0cmluZzsgY29udGV4dDogc3RyaW5nOyBzY29yZTogbnVtYmVyIH0+ID0gW11cbiAgXG4gIC8vIENvbW1vbiBtdWx0aS13b3JkIHRlY2huaWNhbCBwaHJhc2VzXG4gIGNvbnN0IHBocmFzZVBhdHRlcm5zID0gW1xuICAgIC8vIFNjaWVudGlmaWMgcGhyYXNlc1xuICAgIHsgcGF0dGVybjogL1xcYig/OmRlZXAgc2VhfGNlbGwgZGVhdGh8cHJvdGVpbiBzeW50aGVzaXN8RE5BIHJlcGxpY2F0aW9ufGdlbmUgZXhwcmVzc2lvbnxjZWxsIGRpdmlzaW9ufGltbXVuZSByZXNwb25zZXxuZXVyYWwgbmV0d29ya3xtYWNoaW5lIGxlYXJuaW5nfGFydGlmaWNpYWwgaW50ZWxsaWdlbmNlfGRhdGEgYW5hbHlzaXN8c3RhdGlzdGljYWwgc2lnbmlmaWNhbmNlfGNvbnRyb2wgZ3JvdXB8ZXhwZXJpbWVudGFsIGRlc2lnbilcXGIvZ2ksIHdlaWdodDogMC45IH0sXG4gICAgLy8gTWVkaWNhbC9CaW9sb2dpY2FsIHBocmFzZXNcbiAgICB7IHBhdHRlcm46IC9cXGIoPzpibG9vZCBwcmVzc3VyZXxoZWFydCByYXRlfGJyYWluIGZ1bmN0aW9ufG11c2NsZSBjb250cmFjdGlvbnxlbnp5bWUgYWN0aXZpdHl8aG9ybW9uZSBsZXZlbHN8aW1tdW5lIHN5c3RlbXxuZXJ2b3VzIHN5c3RlbXxjYXJkaW92YXNjdWxhciBzeXN0ZW18cmVzcGlyYXRvcnkgc3lzdGVtKVxcYi9naSwgd2VpZ2h0OiAwLjkgfSxcbiAgICAvLyBUZWNobmljYWwgcGhyYXNlc1xuICAgIHsgcGF0dGVybjogL1xcYig/OnVzZXIgaW50ZXJmYWNlfGRhdGFiYXNlIG1hbmFnZW1lbnR8bmV0d29yayBzZWN1cml0eXxzb2Z0d2FyZSBkZXZlbG9wbWVudHxoYXJkd2FyZSBjb25maWd1cmF0aW9ufGRhdGEgcHJvY2Vzc2luZ3xhbGdvcml0aG0gZGVzaWdufHN5c3RlbSBhcmNoaXRlY3R1cmV8Y2xvdWQgY29tcHV0aW5nfG1vYmlsZSBhcHBsaWNhdGlvbilcXGIvZ2ksIHdlaWdodDogMC44IH0sXG4gICAgLy8gQWNhZGVtaWMgcGhyYXNlc1xuICAgIHsgcGF0dGVybjogL1xcYig/OnJlc2VhcmNoIG1ldGhvZG9sb2d5fGxpdGVyYXR1cmUgcmV2aWV3fGRhdGEgY29sbGVjdGlvbnxzdGF0aXN0aWNhbCBhbmFseXNpc3xoeXBvdGhlc2lzIHRlc3Rpbmd8cGVlciByZXZpZXd8YWNhZGVtaWMgd3JpdGluZ3x0aGVvcmV0aWNhbCBmcmFtZXdvcmt8ZW1waXJpY2FsIGV2aWRlbmNlfHF1YWxpdGF0aXZlIHJlc2VhcmNofHF1YW50aXRhdGl2ZSByZXNlYXJjaClcXGIvZ2ksIHdlaWdodDogMC44IH0sXG4gICAgLy8gR2VuZXJhbCBjb21wb3VuZCB0ZXJtc1xuICAgIHsgcGF0dGVybjogL1xcYig/OmhpZ2ggc2Nob29sfG1pZGRsZSBzY2hvb2x8ZWxlbWVudGFyeSBzY2hvb2x8dW5pdmVyc2l0eSBsZXZlbHxncmFkdWF0ZSBsZXZlbHx1bmRlcmdyYWR1YXRlIGxldmVsfHBvc3QgZ3JhZHVhdGV8ZG9jdG9yYWwgZGVncmVlfG1hc3RlcidzIGRlZ3JlZXxiYWNoZWxvcidzIGRlZ3JlZSlcXGIvZ2ksIHdlaWdodDogMC43IH0sXG4gICAgLy8gVGltZS1yZWxhdGVkIHBocmFzZXNcbiAgICB7IHBhdHRlcm46IC9cXGIoPzpsb25nIHRlcm18c2hvcnQgdGVybXxtZWRpdW0gdGVybXxyZWFsIHRpbWV8b3ZlciB0aW1lfGluIHRpbWV8b24gdGltZXxhdCB0aGUgdGltZXxmb3IgdGhlIHRpbWV8ZHVyaW5nIHRoZSB0aW1lKVxcYi9naSwgd2VpZ2h0OiAwLjYgfSxcbiAgICAvLyBMb2NhdGlvbiBwaHJhc2VzXG4gICAgeyBwYXR0ZXJuOiAvXFxiKD86bm9ydGggYW1lcmljYXxzb3V0aCBhbWVyaWNhfGV1cm9wZWFuIHVuaW9ufG1pZGRsZSBlYXN0fGZhciBlYXN0fGNlbnRyYWwgYXNpYXxzb3V0aGVhc3QgYXNpYXxzdWIgc2FoYXJhbnxsYXRpbiBhbWVyaWNhfG5vcnRoIGFmcmljYSlcXGIvZ2ksIHdlaWdodDogMC42IH1cbiAgXVxuICBcbiAgcGhyYXNlUGF0dGVybnMuZm9yRWFjaCgoeyBwYXR0ZXJuLCB3ZWlnaHQgfSkgPT4ge1xuICAgIGNvbnN0IG1hdGNoZXMgPSB0ZXh0Lm1hdGNoKHBhdHRlcm4pXG4gICAgaWYgKG1hdGNoZXMpIHtcbiAgICAgIG1hdGNoZXMuZm9yRWFjaChtYXRjaCA9PiB7XG4gICAgICAgIGNvbnN0IHBocmFzZSA9IG1hdGNoLnRyaW0oKVxuICAgICAgICBpZiAocGhyYXNlLmxlbmd0aCA+IDMgJiYgIWlzQ29tbW9uUGhyYXNlKHBocmFzZSkpIHtcbiAgICAgICAgICBrZXl3b3Jkcy5wdXNoKHtcbiAgICAgICAgICAgIHdvcmQ6IHBocmFzZSxcbiAgICAgICAgICAgIGNvbnRleHQ6IGV4dHJhY3RDb250ZXh0KHRleHQsIHBocmFzZSksXG4gICAgICAgICAgICBzY29yZTogd2VpZ2h0ICogKGZpbmdlcnByaW50LndvcmRGcmVxdWVuY2llc1twaHJhc2UudG9Mb3dlckNhc2UoKV0gfHwgMSlcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH1cbiAgfSlcblxuICAvLyBFeHRyYWN0IGN1c3RvbSBwaHJhc2VzIGZyb20gdGhlIGRvY3VtZW50ICgyLTQgd29yZCBjb21iaW5hdGlvbnMgdGhhdCBhcHBlYXIgZnJlcXVlbnRseSlcbiAgY29uc3Qgd29yZHMgPSB0ZXh0LnRvTG93ZXJDYXNlKCkubWF0Y2goL1xcYlthLXpBLVpdezMsfVxcYi9nKSB8fCBbXVxuICBjb25zdCBwaHJhc2VDb3VudHM6IHsgW2tleTogc3RyaW5nXTogbnVtYmVyIH0gPSB7fVxuICBcbiAgLy8gTG9vayBmb3IgMi13b3JkIHBocmFzZXNcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCB3b3Jkcy5sZW5ndGggLSAxOyBpKyspIHtcbiAgICBjb25zdCBwaHJhc2UgPSBgJHt3b3Jkc1tpXX0gJHt3b3Jkc1tpICsgMV19YFxuICAgIGlmICghaXNDb21tb25QaHJhc2UocGhyYXNlKSkge1xuICAgICAgcGhyYXNlQ291bnRzW3BocmFzZV0gPSAocGhyYXNlQ291bnRzW3BocmFzZV0gfHwgMCkgKyAxXG4gICAgfVxuICB9XG4gIFxuICAvLyBMb29rIGZvciAzLXdvcmQgcGhyYXNlc1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHdvcmRzLmxlbmd0aCAtIDI7IGkrKykge1xuICAgIGNvbnN0IHBocmFzZSA9IGAke3dvcmRzW2ldfSAke3dvcmRzW2kgKyAxXX0gJHt3b3Jkc1tpICsgMl19YFxuICAgIGlmICghaXNDb21tb25QaHJhc2UocGhyYXNlKSkge1xuICAgICAgcGhyYXNlQ291bnRzW3BocmFzZV0gPSAocGhyYXNlQ291bnRzW3BocmFzZV0gfHwgMCkgKyAxXG4gICAgfVxuICB9XG4gIFxuICAvLyBBZGQgZnJlcXVlbnQgY3VzdG9tIHBocmFzZXNcbiAgT2JqZWN0LmVudHJpZXMocGhyYXNlQ291bnRzKS5mb3JFYWNoKChbcGhyYXNlLCBjb3VudF0pID0+IHtcbiAgICBpZiAoY291bnQgPj0gMiAmJiBwaHJhc2UubGVuZ3RoID4gNSkge1xuICAgICAga2V5d29yZHMucHVzaCh7XG4gICAgICAgIHdvcmQ6IHBocmFzZS5zcGxpdCgnICcpLm1hcCh3b3JkID0+IHdvcmQuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyB3b3JkLnNsaWNlKDEpKS5qb2luKCcgJyksXG4gICAgICAgIGNvbnRleHQ6IGV4dHJhY3RDb250ZXh0KHRleHQsIHBocmFzZSksXG4gICAgICAgIHNjb3JlOiBjb3VudCAqIDAuNVxuICAgICAgfSlcbiAgICB9XG4gIH0pXG4gIFxuICByZXR1cm4ga2V5d29yZHNcbn1cblxuZnVuY3Rpb24gaXNDb21tb25QaHJhc2UocGhyYXNlOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgY29uc3QgY29tbW9uUGhyYXNlcyA9IFtcbiAgICAndGhlIHNhbWUnLCAnaW4gdGhlJywgJ29uIHRoZScsICdhdCB0aGUnLCAnZm9yIHRoZScsICd3aXRoIHRoZScsICd0byB0aGUnLCAnb2YgdGhlJywgJ2FuZCB0aGUnLCAnb3IgdGhlJyxcbiAgICAndGhpcyBpcycsICd0aGF0IGlzJywgJ3RoZXJlIGlzJywgJ3RoZXJlIGFyZScsICdpdCBpcycsICdpdCB3YXMnLCAnaXQgaGFzJywgJ2l0IHdpbGwnLCAnaXQgY2FuJywgJ2l0IG1heScsXG4gICAgJ2FzIHdlbGwnLCAnYXMgd2VsbCBhcycsICdzdWNoIGFzJywgJ2ZvciBleGFtcGxlJywgJ2ZvciBpbnN0YW5jZScsICdpbiBhZGRpdGlvbicsICdpbiBmYWN0JywgJ2luIG9yZGVyJyxcbiAgICAnYXQgbGVhc3QnLCAnYXQgbW9zdCcsICdhdCBhbGwnLCAnYXQgb25jZScsICdhdCBmaXJzdCcsICdhdCBsYXN0JywgJ2F0IGJlc3QnLCAnYXQgd29yc3QnLFxuICAgICdvbiB0aGUgb3RoZXIgaGFuZCcsICdvbiB0aGUgY29udHJhcnknLCAnb24gYXZlcmFnZScsICdvbiBwdXJwb3NlJywgJ29uIHRpbWUnLCAnb24gc2NoZWR1bGUnLFxuICAgICdpbiBnZW5lcmFsJywgJ2luIHBhcnRpY3VsYXInLCAnaW4gZGV0YWlsJywgJ2luIHN1bW1hcnknLCAnaW4gY29uY2x1c2lvbicsICdpbiBvdGhlciB3b3JkcycsXG4gICAgJ2ZvciB0aGUgbW9zdCBwYXJ0JywgJ2ZvciB0aGUgdGltZSBiZWluZycsICdmb3IgdGhlIHNha2Ugb2YnLCAnZm9yIHRoZSBwdXJwb3NlIG9mJyxcbiAgICAnYXMgYSByZXN1bHQnLCAnYXMgYSBtYXR0ZXIgb2YgZmFjdCcsICdhcyBhIHdob2xlJywgJ2FzIGEgcnVsZScsICdhcyBhIGNvbnNlcXVlbmNlJyxcbiAgICAnZHVlIHRvJywgJ2JlY2F1c2Ugb2YnLCAnaW4gc3BpdGUgb2YnLCAnaW5zdGVhZCBvZicsICdyYXRoZXIgdGhhbicsICdtb3JlIHRoYW4nLCAnbGVzcyB0aGFuJyxcbiAgICAndXAgdG8nLCAnZG93biB0bycsICdvdmVyIHRvJywgJ3VuZGVyIHRvJywgJ3Rocm91Z2ggdG8nLCAnYWNyb3NzIHRvJywgJ2Fyb3VuZCB0bycsXG4gICAgJ2RlZXAgc2VhJywgJ2NlbGwgZGVhdGgnLCAncHJvdGVpbiBzeW50aGVzaXMnLCAnRE5BIHJlcGxpY2F0aW9uJywgJ2dlbmUgZXhwcmVzc2lvbidcbiAgXVxuICBcbiAgcmV0dXJuIGNvbW1vblBocmFzZXMuaW5jbHVkZXMocGhyYXNlLnRvTG93ZXJDYXNlKCkpXG59XG5cbmFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlRGVmaW5pdGlvbih3b3JkOiBzdHJpbmcsIHRleHQ6IHN0cmluZywgZmluZ2VycHJpbnQ6IGFueSk6IFByb21pc2U8eyBkZWZpbml0aW9uOiBzdHJpbmc7IGlzR1BUOiBib29sZWFuIH0+IHtcbiAgLy8gQ2hlY2sgaWYgT3BlbkFJIEFQSSBrZXkgaXMgY29uZmlndXJlZFxuICBpZiAoIXByb2Nlc3MuZW52Lk9QRU5BSV9BUElfS0VZIHx8IHByb2Nlc3MuZW52Lk9QRU5BSV9BUElfS0VZID09PSAneW91ci1vcGVuYWktYXBpLWtleScpIHtcbiAgICBjb25zb2xlLmxvZygnT3BlbkFJIEFQSSBrZXkgbm90IGNvbmZpZ3VyZWQsIHVzaW5nIGZhbGxiYWNrIHNlbWFudGljIGFuYWx5c2lzIGZvcjonLCB3b3JkKVxuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoeyBkZWZpbml0aW9uOiBnZW5lcmF0ZVNlbWFudGljRGVmaW5pdGlvbih3b3JkLCB0ZXh0LCBmaW5nZXJwcmludCksIGlzR1BUOiBmYWxzZSB9KVxuICB9XG5cbiAgdHJ5IHtcbiAgICAvLyBVc2UgR1BUIHRvIGdlbmVyYXRlIGludGVsbGlnZW50IGtleXdvcmQgZGVmaW5pdGlvblxuICAgIGNvbnN0IGNvbnRleHQgPSBleHRyYWN0Q29udGV4dCh0ZXh0LCB3b3JkLCAyMDApXG4gICAgY29uc3QgZG9tYWlucyA9IGZpbmdlcnByaW50LmRvbWFpbkluZGljYXRvcnMuam9pbignLCAnKSB8fCAnZ2VuZXJhbCdcbiAgICBcbiAgICBjb25zdCBwcm9tcHQgPSBgXG5BbmFseXplIHRoZSBmb2xsb3dpbmcga2V5d29yZCBhbmQgcHJvdmlkZSBhIGNsZWFyLCBjb25jaXNlIGRlZmluaXRpb24gYmFzZWQgb24gaXRzIHVzYWdlIGluIHRoZSBkb2N1bWVudCBjb250ZXh0LiBGb2N1cyBvbjpcblxuMS4gV2hhdCB0aGUgdGVybSBtZWFucyBpbiB0aGlzIHNwZWNpZmljIGNvbnRleHRcbjIuIEl0cyByb2xlIG9yIGZ1bmN0aW9uIGluIHRoZSBkb2N1bWVudFxuMy4gQW55IHRlY2huaWNhbCBvciBkb21haW4tc3BlY2lmaWMgbWVhbmluZ1xuNC4gS2VlcCB0aGUgZGVmaW5pdGlvbiBpbmZvcm1hdGl2ZSBidXQgYWNjZXNzaWJsZVxuXG5LZXl3b3JkOiBcIiR7d29yZH1cIlxuRG9jdW1lbnQgQ29udGV4dDogXCIke2NvbnRleHR9XCJcbkRvbWFpbjogJHtkb21haW5zfVxuXG5Qcm92aWRlIGEgY2xlYXIsIGhlbHBmdWwgZGVmaW5pdGlvbiBpbiAxLTIgc2VudGVuY2VzOmBcblxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgb3BlbmFpLmNoYXQuY29tcGxldGlvbnMuY3JlYXRlKHtcbiAgICAgIG1vZGVsOiBcImdwdC00XCIsXG4gICAgICBtZXNzYWdlczogW1xuICAgICAgICB7XG4gICAgICAgICAgcm9sZTogXCJzeXN0ZW1cIixcbiAgICAgICAgICBjb250ZW50OiBcIllvdSBhcmUgYSBoZWxwZnVsIGFzc2lzdGFudCB0aGF0IHByb3ZpZGVzIGNsZWFyLCBjb25jaXNlIGRlZmluaXRpb25zIG9mIHRlY2huaWNhbCB0ZXJtcyBiYXNlZCBvbiB0aGVpciB1c2FnZSBpbiBkb2N1bWVudHMuIEZvY3VzIG9uIG1ha2luZyBjb21wbGV4IGNvbmNlcHRzIGFjY2Vzc2libGUgYW5kIHVuZGVyc3RhbmRhYmxlLlwiXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICByb2xlOiBcInVzZXJcIixcbiAgICAgICAgICBjb250ZW50OiBwcm9tcHRcbiAgICAgICAgfVxuICAgICAgXSxcbiAgICAgIG1heF90b2tlbnM6IDE1MCxcbiAgICAgIHRlbXBlcmF0dXJlOiAwLjcsXG4gICAgfSlcblxuICAgIGNvbnN0IGRlZmluaXRpb24gPSByZXNwb25zZS5jaG9pY2VzWzBdPy5tZXNzYWdlPy5jb250ZW50Py50cmltKClcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHsgXG4gICAgICBkZWZpbml0aW9uOiBkZWZpbml0aW9uIHx8IGdlbmVyYXRlU2VtYW50aWNEZWZpbml0aW9uKHdvcmQsIHRleHQsIGZpbmdlcnByaW50KSwgXG4gICAgICBpc0dQVDogISFkZWZpbml0aW9uIFxuICAgIH0pXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignR1BUIGtleXdvcmQgZGVmaW5pdGlvbiBnZW5lcmF0aW9uIGZhaWxlZCBmb3I6Jywgd29yZCwgZXJyb3IpXG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7IGRlZmluaXRpb246IGdlbmVyYXRlU2VtYW50aWNEZWZpbml0aW9uKHdvcmQsIHRleHQsIGZpbmdlcnByaW50KSwgaXNHUFQ6IGZhbHNlIH0pXG4gIH1cbn1cblxuZnVuY3Rpb24gZ2VuZXJhdGVTZW1hbnRpY0RlZmluaXRpb24od29yZDogc3RyaW5nLCB0ZXh0OiBzdHJpbmcsIGZpbmdlcnByaW50OiBhbnkpOiBzdHJpbmcge1xuICAvLyBHZW5lcmF0ZSBjb250ZXh0dWFsIGRlZmluaXRpb24gYmFzZWQgb24gdXNhZ2UgcGF0dGVybnNcbiAgY29uc3QgY29udGV4dCA9IGV4dHJhY3RDb250ZXh0KHRleHQsIHdvcmQsIDIwMClcbiAgXG4gIC8vIExvb2sgZm9yIGRlZmluaXRpb24gcGF0dGVybnNcbiAgY29uc3QgZGVmaW5pdGlvblBhdHRlcm5zID0gW1xuICAgIG5ldyBSZWdFeHAoYCR7d29yZH1cXFxccyooPzppc3xhcmV8cmVmZXJzIHRvfG1lYW5zfGRlbm90ZXN8cmVwcmVzZW50cylcXFxccyooW14uXXsxMCwxMDB9KWAsICdpJyksXG4gICAgbmV3IFJlZ0V4cChgKD86aXN8YXJlfHJlZmVycyB0b3xtZWFuc3xkZW5vdGVzfHJlcHJlc2VudHMpXFxcXHMqJHt3b3JkfVxcXFxzKihbXi5dezEwLDEwMH0pYCwgJ2knKSxcbiAgICBuZXcgUmVnRXhwKGAke3dvcmR9XFxcXHMqXFxcXCgoW14pXXsxMCwxMDB9KVxcXFwpYCwgJ2knKVxuICBdXG4gIFxuICBmb3IgKGNvbnN0IHBhdHRlcm4gb2YgZGVmaW5pdGlvblBhdHRlcm5zKSB7XG4gICAgY29uc3QgbWF0Y2ggPSBjb250ZXh0Lm1hdGNoKHBhdHRlcm4pXG4gICAgaWYgKG1hdGNoKSB7XG4gICAgICByZXR1cm4gbWF0Y2hbMV0udHJpbSgpXG4gICAgfVxuICB9XG4gIFxuICAvLyBGYWxsYmFjazogZ2VuZXJhdGUgZGVmaW5pdGlvbiBiYXNlZCBvbiBkb21haW4gYW5kIGNvbnRleHRcbiAgY29uc3QgZG9tYWlucyA9IGZpbmdlcnByaW50LmRvbWFpbkluZGljYXRvcnNcbiAgaWYgKGRvbWFpbnMubGVuZ3RoID4gMCkge1xuICAgIHJldHVybiBgQSAke2RvbWFpbnNbMF0udG9Mb3dlckNhc2UoKX0gdGVybSByZWZlcnJpbmcgdG8gJHt3b3JkLnRvTG93ZXJDYXNlKCl9YFxuICB9XG4gIFxuICByZXR1cm4gYEEgdGVjaG5pY2FsIHRlcm0gdXNlZCBpbiB0aGlzIGNvbnRleHRgXG59XG5cbmZ1bmN0aW9uIGlzQ29tbW9uV29yZCh3b3JkOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgY29uc3QgY29tbW9uV29yZHMgPSBuZXcgU2V0KFtcbiAgICAndGhlJywgJ2FuZCcsICdmb3InLCAnYXJlJywgJ2J1dCcsICdub3QnLCAneW91JywgJ2FsbCcsICdjYW4nLCAnaGFkJywgJ2hlcicsICd3YXMnLCAnb25lJywgJ291cicsICdvdXQnLFxuICAgICdkYXknLCAnZ2V0JywgJ2hhcycsICdoaW0nLCAnaGlzJywgJ2hvdycsICdpdHMnLCAnbWF5JywgJ25ldycsICdub3cnLCAnb2xkJywgJ3NlZScsICd0d28nLCAnd2hvJywgJ2JveScsXG4gICAgJ2RpZCcsICdtYW4nLCAnbWVuJywgJ3B1dCcsICdzYXknLCAnc2hlJywgJ3RvbycsICd1c2UnLCAnd2F5JywgJ3dpbGwnLCAnd2l0aCcsICd0aGlzJywgJ3RoYXQnLCAndGhleScsXG4gICAgJ2hhdmUnLCAnYmVlbicsICd3ZXJlJywgJ3NhaWQnLCAnZWFjaCcsICd3aGljaCcsICd0aGVpcicsICd0aW1lJywgJ2Fib3V0JywgJ3RoZXJlJywgJ2NvdWxkJywgJ290aGVyJyxcbiAgICAnYWZ0ZXInLCAnZmlyc3QnLCAnd2VsbCcsICdhbHNvJywgJ3doZXJlJywgJ211Y2gnLCAnc29tZScsICd0aGVzZScsICd0aGFuJywgJ3dvdWxkJywgJ2xpa2UnLCAnaW50bycsXG4gICAgJ21vcmUnLCAnY29tZScsICdtYWRlJywgJ21hbnknLCAnbW9zdCcsICdvdmVyJywgJ3N1Y2gnLCAndGFrZScsICd0aGFuJywgJ3RoZW0nLCAndmVyeScsICd3aGVuJywgJ3dvcmsnLFxuICAgICd5ZWFyJywgJ3lvdXInLCAnZ29vZCcsICdrbm93JywgJ2p1c3QnLCAnbG9uZycsICdtYWtlJywgJ3JpZ2h0JywgJ3NhbWUnLCAnc2VlbScsICd0ZWxsJywgJ3R1cm4nLCAnd2FudCcsXG4gICAgJ3dlbnQnLCAnd2VyZScsICd3aGF0JywgJ3doZW4nLCAnd2lsbCcsICd3aXRoJywgJ3dvcmsnLCAneWVhcicsICd5b3VyJywgJ2hlcmUnLCAndGhlcmUnLCAnd2hlcmUnLCAnd2h5JyxcbiAgICAnaG93JywgJ3doYXQnLCAnd2hlbicsICd3aGVyZScsICd3aHknLCAnaG93JywgJ3doYXQnLCAnd2hlbicsICd3aGVyZScsICd3aHknLCAnaG93JywgJ3doYXQnLCAnd2hlbidcbiAgXSlcbiAgXG4gIHJldHVybiBjb21tb25Xb3Jkcy5oYXMod29yZC50b0xvd2VyQ2FzZSgpKVxufVxuXG5mdW5jdGlvbiBleHRyYWN0Q29udGV4dCh0ZXh0OiBzdHJpbmcsIHRlcm06IHN0cmluZywgY29udGV4dExlbmd0aDogbnVtYmVyID0gMTAwKTogc3RyaW5nIHtcbiAgY29uc3QgaW5kZXggPSB0ZXh0LnRvTG93ZXJDYXNlKCkuaW5kZXhPZih0ZXJtLnRvTG93ZXJDYXNlKCkpXG4gIGlmIChpbmRleCA9PT0gLTEpIHJldHVybiAnJ1xuICBcbiAgY29uc3Qgc3RhcnQgPSBNYXRoLm1heCgwLCBpbmRleCAtIGNvbnRleHRMZW5ndGgpXG4gIGNvbnN0IGVuZCA9IE1hdGgubWluKHRleHQubGVuZ3RoLCBpbmRleCArIHRlcm0ubGVuZ3RoICsgY29udGV4dExlbmd0aClcbiAgXG4gIHJldHVybiB0ZXh0LnN1YnN0cmluZyhzdGFydCwgZW5kKS50cmltKClcbn1cblxuZnVuY3Rpb24gY2xlYW5UZXh0Rm9yS2V5d29yZERldGVjdGlvbih0ZXh0OiBzdHJpbmcpOiBzdHJpbmcge1xuICBsZXQgY2xlYW5lZFRleHQgPSB0ZXh0XG4gIFxuICAvLyBSZW1vdmUgcmVmZXJlbmNlcy9iaWJsaW9ncmFwaHkgc2VjdGlvbnNcbiAgY2xlYW5lZFRleHQgPSBjbGVhbmVkVGV4dC5yZXBsYWNlKC8ocmVmZXJlbmNlcz98YmlibGlvZ3JhcGh5fHdvcmtzIGNpdGVkfHNvdXJjZXM/KVxccyo6Py4qJC9naW0sICcnKVxuICBcbiAgLy8gUmVtb3ZlIENyZWF0aXZlIENvbW1vbnMgYW5kIGNvcHlyaWdodCBpbmZvcm1hdGlvblxuICBjbGVhbmVkVGV4dCA9IGNsZWFuZWRUZXh0LnJlcGxhY2UoL2NyZWF0aXZlIGNvbW1vbnMuKj8kL2dpbSwgJycpXG4gIGNsZWFuZWRUZXh0ID0gY2xlYW5lZFRleHQucmVwbGFjZSgvY29weXJpZ2h0Lio/JC9naW0sICcnKVxuICBjbGVhbmVkVGV4dCA9IGNsZWFuZWRUZXh0LnJlcGxhY2UoL8KpLio/JC9naW0sICcnKVxuICBjbGVhbmVkVGV4dCA9IGNsZWFuZWRUZXh0LnJlcGxhY2UoL2FsbCByaWdodHMgcmVzZXJ2ZWQuKj8kL2dpbSwgJycpXG4gIFxuICAvLyBSZW1vdmUgYXV0aG9yIGFmZmlsaWF0aW9ucyBhbmQgYWNrbm93bGVkZ21lbnRzXG4gIGNsZWFuZWRUZXh0ID0gY2xlYW5lZFRleHQucmVwbGFjZSgvYWNrbm93bGVkZ21lbnRzPy4qPyQvZ2ltLCAnJylcbiAgY2xlYW5lZFRleHQgPSBjbGVhbmVkVGV4dC5yZXBsYWNlKC9mdW5kaW5nLio/JC9naW0sICcnKVxuICBjbGVhbmVkVGV4dCA9IGNsZWFuZWRUZXh0LnJlcGxhY2UoL2F1dGhvciBhZmZpbGlhdGlvbnM/Lio/JC9naW0sICcnKVxuICBcbiAgLy8gUmVtb3ZlIGFic3RyYWN0IGFuZCBtZXRhZGF0YSBzZWN0aW9uc1xuICBjbGVhbmVkVGV4dCA9IGNsZWFuZWRUZXh0LnJlcGxhY2UoL2Fic3RyYWN0XFxzKjo/Lio/KD89XFxuXFxufFxcbltBLVpdfCQpL2dpbSwgJycpXG4gIGNsZWFuZWRUZXh0ID0gY2xlYW5lZFRleHQucmVwbGFjZSgva2V5d29yZHM/XFxzKjo/Lio/KD89XFxuXFxufFxcbltBLVpdfCQpL2dpbSwgJycpXG4gIFxuICAvLyBSZW1vdmUgcGFnZSBudW1iZXJzIGFuZCBoZWFkZXJzL2Zvb3RlcnNcbiAgY2xlYW5lZFRleHQgPSBjbGVhbmVkVGV4dC5yZXBsYWNlKC9eXFxzKlxcZCtcXHMqJC9nbSwgJycpIC8vIFN0YW5kYWxvbmUgcGFnZSBudW1iZXJzXG4gIGNsZWFuZWRUZXh0ID0gY2xlYW5lZFRleHQucmVwbGFjZSgvXnBhZ2UgXFxkKy4qJC9naW0sICcnKSAvLyBcIlBhZ2UgWFwiIGhlYWRlcnNcbiAgXG4gIC8vIFJlbW92ZSBsZWdhbCBkaXNjbGFpbWVycyBhbmQgYm9pbGVycGxhdGVcbiAgY2xlYW5lZFRleHQgPSBjbGVhbmVkVGV4dC5yZXBsYWNlKC9kaXNjbGFpbWVyLio/JC9naW0sICcnKVxuICBjbGVhbmVkVGV4dCA9IGNsZWFuZWRUZXh0LnJlcGxhY2UoL3Rlcm1zIG9mIHVzZS4qPyQvZ2ltLCAnJylcbiAgY2xlYW5lZFRleHQgPSBjbGVhbmVkVGV4dC5yZXBsYWNlKC9wcml2YWN5IHBvbGljeS4qPyQvZ2ltLCAnJylcbiAgXG4gIC8vIFJlbW92ZSBleGNlc3NpdmUgd2hpdGVzcGFjZSBhbmQgbm9ybWFsaXplXG4gIGNsZWFuZWRUZXh0ID0gY2xlYW5lZFRleHQucmVwbGFjZSgvXFxuXFxzKlxcblxccypcXG4vZywgJ1xcblxcbicpIC8vIE11bHRpcGxlIG5ld2xpbmVzIHRvIGRvdWJsZVxuICBjbGVhbmVkVGV4dCA9IGNsZWFuZWRUZXh0LnJlcGxhY2UoL15cXHMrfFxccyskL2dtLCAnJykgLy8gVHJpbSBlYWNoIGxpbmVcbiAgY2xlYW5lZFRleHQgPSBjbGVhbmVkVGV4dC50cmltKClcbiAgXG4gIHJldHVybiBjbGVhbmVkVGV4dFxufVxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsIk9wZW5BSSIsIm9wZW5haSIsImFwaUtleSIsInByb2Nlc3MiLCJlbnYiLCJPUEVOQUlfQVBJX0tFWSIsIlBPU1QiLCJyZXF1ZXN0IiwidGV4dCIsImpzb24iLCJlcnJvciIsInN0YXR1cyIsImtleXdvcmRzIiwic2VtYW50aWNGaW5nZXJwcmludEtleXdvcmREZXRlY3Rpb24iLCJjb25zb2xlIiwiZm91bmRUZXJtcyIsIlNldCIsImNsZWFuVGV4dCIsImNsZWFuVGV4dEZvcktleXdvcmREZXRlY3Rpb24iLCJzZW1hbnRpY0ZpbmdlcnByaW50IiwiYW5hbHl6ZVNlbWFudGljRmluZ2VycHJpbnQiLCJzdHJhdGVnaWVzIiwiZXh0cmFjdFRlY2huaWNhbFRlcm1zIiwiZXh0cmFjdEZyZXF1ZW50SW50ZWdyYWxUZXJtcyIsImV4dHJhY3RDb250ZXh0dWFsS2V5d29yZHMiLCJleHRyYWN0RG9tYWluU3BlY2lmaWNUZXJtcyIsImV4dHJhY3RTZW1hbnRpY0NsdXN0ZXJzIiwiZXh0cmFjdE11bHRpV29yZFBocmFzZXMiLCJmb3JFYWNoIiwic3RyYXRlZ3kiLCJleHRyYWN0ZWRLZXl3b3JkcyIsImtleXdvcmQiLCJoYXMiLCJ3b3JkIiwidG9Mb3dlckNhc2UiLCJhZGQiLCJwdXNoIiwidW5pcXVlS2V5d29yZHMiLCJmaWx0ZXIiLCJpbmRleCIsInNlbGYiLCJmaW5kSW5kZXgiLCJrIiwic29ydCIsImEiLCJiIiwic2NvcmUiLCJrZXl3b3Jkc1dpdGhEZWZpbml0aW9ucyIsIlByb21pc2UiLCJhbGwiLCJzbGljZSIsIm1hcCIsImRlZmluaXRpb25SZXN1bHQiLCJnZW5lcmF0ZURlZmluaXRpb24iLCJkZWZpbml0aW9uIiwiY29udGV4dCIsImlzR1BUIiwiZmluZ2VycHJpbnQiLCJzZWN0aW9ucyIsImV4dHJhY3REb2N1bWVudFNlY3Rpb25zIiwid29yZEZyZXF1ZW5jaWVzIiwiY2FsY3VsYXRlV29yZEZyZXF1ZW5jaWVzIiwidGVjaG5pY2FsRGVuc2l0eSIsImNhbGN1bGF0ZVRlY2huaWNhbERlbnNpdHkiLCJzZW1hbnRpY0NsdXN0ZXJzIiwiaWRlbnRpZnlTZW1hbnRpY0NsdXN0ZXJzIiwiY29udGV4dHVhbEltcG9ydGFuY2UiLCJjYWxjdWxhdGVDb250ZXh0dWFsSW1wb3J0YW5jZSIsImRvbWFpbkluZGljYXRvcnMiLCJpZGVudGlmeURvbWFpbkluZGljYXRvcnMiLCJhYnN0cmFjdCIsImV4dHJhY3RTZWN0aW9uIiwiaW50cm9kdWN0aW9uIiwibWV0aG9kb2xvZ3kiLCJyZXN1bHRzIiwiZGlzY3Vzc2lvbiIsImNvbmNsdXNpb24iLCJwYXR0ZXJuIiwibWF0Y2giLCJSZWdFeHAiLCJzb3VyY2UiLCJ0cmltIiwid29yZHMiLCJmcmVxdWVuY2llcyIsInRlY2huaWNhbFBhdHRlcm5zIiwidGVjaG5pY2FsQ291bnQiLCJtYXRjaGVzIiwibGVuZ3RoIiwidG90YWxXb3JkcyIsImNsdXN0ZXJzIiwiY2x1c3RlclBhdHRlcm5zIiwiY2x1c3RlciIsInRlcm0iLCJ0ZXN0IiwiaW1wb3J0YW5jZSIsImFsbFNlY3Rpb25UZXh0IiwiT2JqZWN0IiwidmFsdWVzIiwiam9pbiIsIndvcmRDb3VudHMiLCJlbnRyaWVzIiwiY291bnQiLCJzZWN0aW9uIiwiaW5jbHVkZXMiLCJkb21haW5QYXR0ZXJucyIsImRvbWFpbnMiLCJkb21haW5OYW1lcyIsIndlaWdodCIsImlzQ29tbW9uV29yZCIsImV4dHJhY3RDb250ZXh0IiwiZnJlcXVlbmN5IiwiY29udGV4dHVhbFNjb3JlIiwiY2hhckF0IiwidG9VcHBlckNhc2UiLCJzZWN0aW9uVGVybXMiLCJzZWN0aW9uTmFtZSIsInNlY3Rpb25UZXh0Iiwic2VjdGlvbkNvdW50IiwiZG9tYWluVGVybXMiLCJyZWdleCIsInBocmFzZVBhdHRlcm5zIiwicGhyYXNlIiwiaXNDb21tb25QaHJhc2UiLCJwaHJhc2VDb3VudHMiLCJpIiwic3BsaXQiLCJjb21tb25QaHJhc2VzIiwibG9nIiwicmVzb2x2ZSIsImdlbmVyYXRlU2VtYW50aWNEZWZpbml0aW9uIiwicHJvbXB0IiwicmVzcG9uc2UiLCJjaGF0IiwiY29tcGxldGlvbnMiLCJjcmVhdGUiLCJtb2RlbCIsIm1lc3NhZ2VzIiwicm9sZSIsImNvbnRlbnQiLCJtYXhfdG9rZW5zIiwidGVtcGVyYXR1cmUiLCJjaG9pY2VzIiwibWVzc2FnZSIsImRlZmluaXRpb25QYXR0ZXJucyIsImNvbW1vbldvcmRzIiwiY29udGV4dExlbmd0aCIsImluZGV4T2YiLCJzdGFydCIsIk1hdGgiLCJtYXgiLCJlbmQiLCJtaW4iLCJzdWJzdHJpbmciLCJjbGVhbmVkVGV4dCIsInJlcGxhY2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/detect-keywords/route.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/formdata-node","vendor-chunks/ms","vendor-chunks/openai","vendor-chunks/tr46","vendor-chunks/web-streams-polyfill","vendor-chunks/node-fetch","vendor-chunks/whatwg-url","vendor-chunks/event-target-shim","vendor-chunks/agentkeepalive","vendor-chunks/form-data-encoder","vendor-chunks/webidl-conversions","vendor-chunks/abort-controller","vendor-chunks/humanize-ms"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fdetect-keywords%2Froute&page=%2Fapi%2Fdetect-keywords%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fdetect-keywords%2Froute.ts&appDir=%2Fhome%2Frishi%2FDesktop%2Fhackathon%2FHelloWorld2025%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Frishi%2FDesktop%2Fhackathon%2FHelloWorld2025&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();